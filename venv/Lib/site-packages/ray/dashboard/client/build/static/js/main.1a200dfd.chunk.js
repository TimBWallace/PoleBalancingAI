(this["webpackJsonpray-dashboard-client"]=this["webpackJsonpray-dashboard-client"]||[]).push([[0],{101:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r,a=n(9),c=n(92),o=n(89),i=n(91),s=n(478),l=n(88),u=n(479),d=n(480);n(0);!function(e){e.ALIVE="ALIVE",e.PENDING="PENDING",e.RECONSTRUCTING="RECONSTRUCTING",e.DEAD="DEAD"}(r||(r={}));var j,b=n(1),p={node:{ALIVE:c.a,DEAD:o.a},actor:(j={},Object(a.a)(j,r.ALIVE,c.a),Object(a.a)(j,r.DEAD,o.a),Object(a.a)(j,r.PENDING,i.a),Object(a.a)(j,r.RECONSTRUCTING,s.a),j),job:{INIT:l.a,SUBMITTED:i.a,DISPATCHED:s.a,RUNNING:c.a,COMPLETED:u.a,FINISHED:u.a,FAILED:o.a}},m={deps:i.a,INFO:u.a,ERROR:o.a},h=function(e){var t=e.type,n=e.status,r=e.suffix,a={padding:"2px 8px",border:"solid 1px",borderRadius:4,fontSize:12,margin:2},c=d.a;return m[t]?c=m[t]:"string"===typeof n&&p[t]&&p[t][n]&&(c=p[t][n]),a.color=c[500],a.borderColor=c[500],c!==d.a&&(a.backgroundColor="".concat(c[500],"20")),Object(b.jsxs)("span",{style:a,children:[n,r]})}},102:function(e,t,n){"use strict";var r=n(409),a=n(146),c=(n(0),n(1)),o=Object(r.a)((function(e){return{card:{padding:e.spacing(2),paddingTop:e.spacing(1.5),margin:[e.spacing(2),e.spacing(1)].map((function(e){return"".concat(e,"px")})).join(" ")},title:{fontSize:e.typography.fontSize+2,fontWeight:500,color:e.palette.text.secondary,marginBottom:e.spacing(1)},body:{padding:e.spacing(.5)}}}));t.a=function(e){var t=e.title,n=e.children,r=o();return Object(c.jsxs)(a.a,{className:r.card,children:[Object(c.jsx)("div",{className:r.title,children:t}),Object(c.jsx)("div",{className:r.body,children:n})]})}},103:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var r=n(10),a=n(21),c=n(7),o=n(71),i=n(0),s=function(){var e=Object(i.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1];return{changeFilter:function(e,t){var c=n.find((function(t){return t.key===e}));c?c.val=t:n.push({key:e,val:t}),r(Object(a.a)(n))},filterFunc:function(e){return n.every((function(t){return!t.val||Object(o.get)(e,t.key,"").toString().includes(t.val)}))}}},l=function(e){var t=Object(i.useState)({key:e||"",desc:!1}),n=Object(c.a)(t,2),a=n[0],s=n[1];return{sorterFunc:function(e,t){if(!a.key)return 0;var n=e,r=t;return a.desc&&(r=e,n=t),Object(o.get)(r,a.key)?Object(o.get)(n,a.key)?Object(o.get)(r,a.key)>Object(o.get)(n,a.key)?1:-1:1:-1},setSortKey:function(e){return s(Object(r.a)(Object(r.a)({},a),{},{key:e}))},setOrderDesc:function(e){return s(Object(r.a)(Object(r.a)({},a),{},{desc:e}))},sorterKey:a.key}}},106:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));var r=n(19),a=n(15),c=n.n(a),o=n(62),i=function(){var e=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.b)("nodes?view=summary");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.b)("nodes/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},108:function(e,t,n){"use strict";var r=n(10),a=n(7),c=n(59),o=n.n(c),i=n(140),s=n.n(i),l=n(0),u=n.n(l),d=n(143),j=(n(406),n(407),n(408),n(73)),b=n(1),p=function(){return Math.random().toString(16).slice(-8)},m=/(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)\s+([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]/,h=function e(t,n){var r=t.type,a=t.tagName,c=t.properties,o=t.children,i=t.value,s=void 0===i?"":i,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";switch(r){case"element":return u.a.createElement(a,{className:c.className[0],key:"".concat(n,"line").concat(p())},o.map((function(t,r){return e(t,"".concat(n,"-").concat(r),l)})));case"text":if(l&&s.includes(l)){var d=[],j=s.split(l),b=j.shift();if(!b)return u.a.createElement("span",{className:"find-kws"},l);for(;"string"===typeof b;)""!==b?d.push(b):d.push(u.a.createElement("span",{className:"find-kws"},l)),(b=j.shift())&&d.push(u.a.createElement("span",{className:"find-kws"},l));return d}return s;default:return[]}};t.a=function(e){var t=e.content,n=e.width,c=void 0===n?"100%":n,i=e.height,u=e.fontSize,p=void 0===u?12:u,f=e.theme,O=void 0===f?Object(j.c)():f,g=e.keywords,x=void 0===g?"":g,v=e.language,y=void 0===v?"dos":v,k=e.focusLine,S=void 0===k?1:k,N=e.style,C=void 0===N?{}:N,w=e.listRef,T=e.onScrollBottom,I=e.revert,F=void 0!==I&&I,R=e.startTime,A=e.endTime,E=Object(l.useState)([]),L=Object(a.a)(E,2),M=L[0],D=L[1],z=M.length,P=Object(l.useRef)(),W=Object(l.useRef)(null),B=Object(l.useRef)(null);w&&(w.current=B.current);return Object(l.useEffect)((function(){var e=t.split("\n");P.current&&clearTimeout(P.current),P.current=setTimeout((function(){D(e.map((function(e,t){return{i:t,origin:e,time:((null===e||void 0===e?void 0:e.match(m))||[""])[0]}})).filter((function(e){var t=e.origin.includes(x);return e.time&&R&&!o()(e.time).isAfter(o()(R))&&(t=!1),e.time&&A&&!o()(e.time).isBefore(o()(A))&&(t=!1),t})).map((function(e){return Object(r.a)({},e)})))}),500)}),[t,x,y,R,A]),Object(l.useEffect)((function(){var e;W.current&&(null===(e=W.current)||void 0===e||e.scrollTo((S-1)*(p+6)))}),[S,p]),Object(l.useEffect)((function(){var e=null;if(B.current){var t=function(t){var n=t.target;n&&n.scrollTop+n.clientHeight===n.scrollHeight&&T&&T(t),e=B.current};return B.current.addEventListener("scroll",t),function(){e&&e.removeEventListener("scroll",t)}}}),[T]),Object(b.jsx)(d.a,{height:i||18*(t.split("\n").length+1),width:c,ref:W,outerRef:B,className:"hljs-".concat(O),style:Object(r.a)({fontSize:p,fontFamily:"menlo, monospace"},C),itemSize:p+6,itemCount:z,children:function(e){var t=e.index,n=e.style,a=M[F?M.length-1-t:t],c=a.i,o=a.origin;return Object(b.jsxs)("div",{style:Object(r.a)(Object(r.a)({},n),{},{overflowX:"visible",whiteSpace:"pre"}),children:[Object(b.jsx)("span",{style:{marginRight:4,width:6*"".concat(M.length).length+4,color:"#999",display:"inline-block"},children:c+1}),s.a.highlight(y,o).value.map((function(e){return h(e,t.toString(),x)}))]},"".concat(t,"list"))}})}},124:function(e,t,n){"use strict";t.a=n.p+"static/media/logo.3704c1bb.svg"},152:function(e,t,n){"use strict";n.r(t);n(0);var r=n(16),a=n.n(r),c=(n(166),n(73)),o=n(1);a.a.render(Object(o.jsx)(c.b,{}),document.getElementById("root"))},406:function(e,t,n){},407:function(e,t,n){},408:function(e,t,n){},62:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o}));var r=n(68),a=n.n(r),c=function(e){return e.startsWith("/")?e.slice(1):e},o=function(e,t){return a.a.get(c(e),t)}},73:function(e,t,n){"use strict";n.d(t,"a",(function(){return da})),n.d(t,"c",(function(){return ja}));var r,a=n(10),c=n(7),o=n(485),i=n(484),s=n(0),l=n.n(s),u=n(18),d=n(64),j=n(25),b=n(19),p=n(15),m=n.n(p),h=n(409),f=n(493),O=n(99),g=n(471),x=n(487),v=n(477),y=n(62),k=function(){var e=Object(b.a)(m.a.mark((function e(t,n){var r,a,c,o,i,s,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.entries(n).map((function(e){return e.join("=")})).join("&"),a=[Object(y.a)(t),r].filter((function(e){return e})).join("?"),e.next=4,fetch(a);case 4:return c=e.sent,e.next=7,c.json();case 7:if(o=e.sent,i=o.result,s=o.msg,l=o.data,i){e.next=11;break}throw Error(s);case 11:return e.abrupt("return",l);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function S(e){return e.state!==r.Infeasible&&e.state!==r.PendingResources}!function(e){e.Infeasible="INFEASIBLE",e.PendingResources="PENDING_RESOURCES",e.DependenciesUnready="PENDING",e.PendingCreation="CREATING",e.Alive="ALIVE",e.Restarting="RESTARTING",e.Dead="DEAD"}(r||(r={}));var N,C=function(e,t){return k("/node_errors",{nodeIp:e,pid:null!==t&&void 0!==t?t:""})},w=function(e,t){return k("/node_logs",{ip:e,pid:null!==t&&void 0!==t?t:""})},T=function(e,t,n){return k("/api/launch_profiling",{node_id:e,pid:t,duration:n})},I=function(e){var t=encodeURIComponent(Object(y.a)("/api/get_profiling_info?profiling_id=".concat(e)));return Object(y.a)("/speedscope/index.html#profileURL=".concat(t))},F=function(){return k("/tune/info",{})},R=function(e){return k("/tune/set_experiment",{experiment:e})},A=function(){return k("/tune/enable_tensorboard",{})},E=function(e){return k("/memory/set_fetch",{shouldFetch:e})},L=n(23),M=n(17),D=n(27),z=n(28),P=n(5),W=n(1),B=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.lastUpdatedAt,r=e.error;return Object(W.jsxs)("div",{className:t.root,children:[null!==n&&Object(W.jsxs)(O.a,{className:t.lastUpdated,children:["Last updated: ",new Date(n).toLocaleString()]}),null!==r&&Object(W.jsx)(O.a,{className:t.error,children:r})]})}}]),n}(l.a.Component),U=Object(u.b)((function(e){return{lastUpdatedAt:e.dashboard.lastUpdatedAt,error:e.dashboard.error}}))(Object(P.a)((function(e){return Object(f.a)({root:{marginTop:e.spacing(2)},lastUpdated:{color:e.palette.text.secondary,fontSize:"0.8125rem",textAlign:"center"},error:{color:e.palette.error.main,fontSize:"0.8125rem",textAlign:"center"}})}))(B)),G=n(486),H=n(414),_=n(415),V=n(417),J=n(418),q=n(496),Y=n(492),K=n(489),X=function(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0},Q=function(e,t,n){var r=n(e),a=n(t);return a<r?-1:a>r?1:0},Z=function(e,t){return function(n,r){return"desc"===e?Q(n,r,t):-Q(n,r,t)}},$=function(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n.map((function(e){return e[0]}))},ee=n(39),te=function(e){if(0===e.length)return 0;var t,n=0,r=0,a=Object(ee.a)(e);try{for(a.s();!(t=a.n()).done;){var c=t.value,o=c.weight;n+=o*c.value,r+=o}}catch(i){a.e(i)}finally{a.f()}return n/r},ne=function(e){return e.reduce((function(e,t){return e+t}),0)},re=n(142),ae=n(146),ce=n(460),oe=n(129),ie=n.n(oe),se=n(130),le=n.n(se),ue=function(e){var t=e.onClick;return Object(W.jsx)(ie.a,{onClick:t})},de=function(e){var t=e.onClick;return Object(W.jsx)(le.a,{onClick:t})},je=n(461),be=Object(h.a)({tooltipLabel:{textDecorationLine:"underline",textDecorationColor:"#a6c3e3",textDecorationThickness:"1px",textDecorationStyle:"dotted",cursor:"help"}}),pe=function(e){var t=e.label,n=e.datum,r=e.tooltip,a=be(),c=Object(W.jsxs)(ce.a,{container:!0,item:!0,xs:12,children:[Object(W.jsx)(ce.a,{item:!0,xs:6,children:Object(W.jsx)(G.a,{className:r&&a.tooltipLabel,children:t})}),Object(W.jsx)(ce.a,{item:!0,xs:6,children:Object(W.jsx)("span",{children:n})})]});return r?Object(W.jsx)(je.a,{title:r,children:c}):c},me=n(9),he=n(462),fe=Object(h.a)((function(e){return Object(f.a)({root:{borderColor:e.palette.divider,borderStyle:"solid",borderWidth:1,display:"flex",flexGrow:1},inner:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}})})),Oe=function(e){var t=e.percent,n=e.text,r=fe(),a=Math.max(Math.min(t,100),0),o=[0,255,0],i=o,s=function(e,t,n){var r=Object(c.a)(e,3),a=r[0],o=r[1],i=r[2],s=Object(c.a)(t,3);return[a*(1-n)+s[0]*n,o*(1-n)+s[1]*n,i*(1-n)+s[2]*n]}(o,[255,0,0],a/100),l="\n    linear-gradient(\n      to right,\n      rgba(".concat(i.join(","),", ").concat(.2,") 0%,\n      rgba(").concat(s.join(","),", ").concat(.2,") ").concat(a,"%,\n      transparent ").concat(a,"%\n    )\n  ");return Object(W.jsx)("span",{className:r.root,children:Object(W.jsx)("span",{className:r.inner,style:{background:l,flexGrow:1},children:Object(W.jsx)(O.a,{align:"center",children:n})})})},ge=r.Alive,xe=r.Dead,ve=r.PendingCreation,ye=r.Restarting,ke=r.DependenciesUnready,Se=r.Infeasible,Ne=r.PendingResources,Ce=Object(h.a)((function(e){return Object(f.a)({infeasible:{color:e.palette.error.light},pendingResources:{color:e.palette.warning.light},unknown:{color:e.palette.warning.light},creating:{color:e.palette.success.light},alive:{color:e.palette.success.dark},restarting:{color:e.palette.warning.light},dead:{color:"#cccccc"},tooltip:{cursor:"help"}})})),we=(N={},Object(me.a)(N,ge,"The actor is alive and handling remote calls."),Object(me.a)(N,xe,"The actor is dead and will not be restarted anymore."),Object(me.a)(N,Se,"The actor cannot be created because of insufficient resources in the cluster. Please examine its resource constraints to make sure they are correct or add additional compute to your cluster."),Object(me.a)(N,ye,"The actor died and is restarting."),Object(me.a)(N,ve,"The actor's resources and other dependencies are ready, and the Ray backend is processing its creation."),Object(me.a)(N,ke,"The actor is pending creation because it is waiting for one or more of its initialization arguments to be ready."),Object(me.a)(N,Ne,"The actor is pending resources, such as GPU, Memory, or CPU. It will be created when they become available."),N),Te=function(e){var t,n=e.state,r=e.variant,a=e.showTooltip,c=Ce(),o=null!==r&&void 0!==r?r:"body1";switch(n){case Se:t=Object(W.jsx)(O.a,{variant:o,className:c.infeasible,children:"Infeasible"});break;case Ne:t=Object(W.jsx)(O.a,{variant:o,className:c.pendingResources,children:"Pending Resources"});break;case ve:t=Object(W.jsx)(O.a,{variant:o,className:c.creating,children:"Creating"});break;case ke:t=Object(W.jsx)(O.a,{variant:o,className:c.creating,children:"Dependencies Unready"});break;case ge:t=Object(W.jsx)(O.a,{variant:o,className:c.alive,children:"Alive"});break;case ye:t=Object(W.jsx)(O.a,{variant:o,className:c.restarting,children:"Restarting"});break;case xe:t=Object(W.jsx)(O.a,{variant:o,className:c.dead,children:"Dead"})}return a?Object(W.jsx)(je.a,{className:c.tooltip,title:we[n],children:t}):t},Ie="https://docs.ray.io/en/master/memory-management.html#debugging-using-ray-memory",Fe=Object(h.a)((function(e){return{divider:{width:"100%",margin:"0 auto"},actorTitleWrapper:{marginTop:e.spacing(1),marginBottom:e.spacing(1),fontWeight:"bold",fontSize:"130%"},detailsPane:{margin:e.spacing(1)}}})),Re=function(e){var t,n,r,a,o=e.actor,i=Fe(),s=function(e){var t,n,r,a,o,i,s,l,u,d;return S(e)?[{label:"Resources",value:e.usedResources&&Object.entries(e.usedResources).length>0&&Object.entries(e.usedResources).sort((function(e,t){return e[0].localeCompare(t[0])})).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return"".concat(ne(r.resourceSlots.map((function(e){return e.allocation})))," ").concat(n)})).join(", ")},{label:"Number of pending tasks",value:null!==(t=null===(n=e.taskQueueLength)||void 0===n?void 0:n.toLocaleString())&&void 0!==t?t:"0",tooltip:"The number of tasks that are currently pending to execute on this actor. If this number remains consistently high, it may indicate that this actor is a bottleneck in your application."},{label:"Number of executed tasks",value:null!==(r=null===(a=e.numExecutedTasks)||void 0===a?void 0:a.toLocaleString())&&void 0!==r?r:"0",tooltip:"The number of tasks this actor has executed throughout its lifetimes."},{label:"Number of ObjectRefs in scope",value:null!==(o=null===(i=e.numObjectRefsInScope)||void 0===i?void 0:i.toLocaleString())&&void 0!==o?o:"0",tooltip:"The number of ObjectRefs that this actor is keeping in scope via its internal state. This does not imply that the objects are in active use or colocated on the node with the actor "+"currently. This can be useful for debugging memory leaks. See the docs at ".concat(Ie," ")+"for more information."},{label:"Number of local objects",value:null!==(s=null===(l=e.numLocalObjects)||void 0===l?void 0:l.toLocaleString())&&void 0!==s?s:"0",tooltip:"The number of small objects that this actor has stored in its local in-process memory store. This can be useful for "+"debugging memory leaks. See the docs at ".concat(Ie," for more information")},{label:"Object store memory used (MiB)",value:null!==(u=null===(d=e.usedObjectStoreMemory)||void 0===d?void 0:d.toLocaleString())&&void 0!==u?u:"0",tooltip:"The total amount of memory that this actor is occupying in the Ray object store. If this number is increasing without bounds, you might have a memory leak. See "+"the docs at: ".concat(Ie," for more information.")}]:[{label:"Actor ID",value:e.actorId,tooltip:""},{label:"Required resources",value:e.requiredResources&&Object.entries(e.requiredResources).length>0&&Object.entries(e.requiredResources).sort((function(e,t){return e[0].localeCompare(t[0])})).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return"".concat(r.toLocaleString()," ").concat(n)})).join(", "),tooltip:""}]}(o);return Object(W.jsxs)(l.a.Fragment,{children:[Object(W.jsxs)("div",{className:i.actorTitleWrapper,children:[Object(W.jsx)("div",{children:o.actorClass}),Object(W.jsx)(Te,{state:o.state})]}),S(o)&&Object(W.jsxs)(ce.a,{container:!0,spacing:3,className:i.detailsPane,children:[Object(W.jsxs)(ce.a,{container:!0,item:!0,xs:6,children:[Object(W.jsx)(ce.a,{item:!0,xs:4,children:Object(W.jsx)(O.a,{children:"CPU Usage"})}),Object(W.jsx)(ce.a,{item:!0,xs:4,children:Object(W.jsx)(Oe,{percent:null!==(t=null===(n=o.processStats)||void 0===n?void 0:n.cpuPercent)&&void 0!==t?t:0,text:"".concat(null!==(r=null===(a=o.processStats)||void 0===a?void 0:a.cpuPercent)&&void 0!==r?r:0,"%")})}),Object(W.jsx)(ce.a,{item:!0,xs:4})]}),o.gpus.length>0&&Object(W.jsxs)(ce.a,{container:!0,item:!0,xs:6,children:[Object(W.jsx)(ce.a,{item:!0,xs:12,children:Object(W.jsx)(O.a,{children:"GPU Usage"})}),o.gpus.map((function(e){var t=e.utilizationGpu?Object(W.jsx)(Oe,{percent:100*e.utilizationGpu,text:"".concat(100*e.utilizationGpu,"%")}):Object(W.jsx)(O.a,{color:"textSecondary",component:"span",variant:"inherit",children:"N/A"});return Object(W.jsxs)(l.a.Fragment,{children:[Object(W.jsx)(ce.a,{item:!0,xs:4,children:"[".concat(e.name,"]")}),Object(W.jsx)(ce.a,{item:!0,xs:4,children:t}),Object(W.jsx)(ce.a,{item:!0,xs:4})]},e.uuid)}))]})]}),Object(W.jsx)(he.a,{className:i.divider}),Object(W.jsx)(ce.a,{container:!0,className:i.detailsPane,children:s.map((function(e){var t=e.label,n=e.value,r=e.tooltip;return n&&n.length>0&&Object(W.jsx)(pe,{label:t,datum:n,tooltip:r},t)}))})]})},Ae=Object(h.a)((function(e){return Object(f.a)({root:{borderColor:e.palette.divider,borderStyle:"solid",borderWidth:1,marginTop:e.spacing(2),padding:e.spacing(2),width:"100%"},title:{color:e.palette.text.secondary,fontSize:"0.75rem"},action:{color:e.palette.primary.main,textDecoration:"none","&:hover":{cursor:"pointer"}},infeasible:{color:e.palette.error.main},pendingResources:{color:e.palette.secondary.main},webuiDisplay:{fontSize:"0.875rem"},inlineHTML:{fontSize:"0.875rem",display:"inline"}})})),Ee=function(e){var t=e.actor,n=Object(s.useState)({}),o=Object(c.a)(n,2),i=o[0],u=o[1],d=Ae(),j=function(e){return Object(b.a)(m.a.mark((function n(){var c,o;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.state!==r.Alive){n.next=8;break}return n.next=3,T(t.nodeId,t.pid,e);case 3:return c=n.sent,u(Object(a.a)(Object(a.a)({},i),{},Object(me.a)({},c,{startTime:Date.now(),latestResponse:null}))),o=function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("/api/check_profiling_status",{profiling_id:c});case 2:t=e.sent,u(Object(a.a)(Object(a.a)({},i),{},Object(me.a)({},c,Object(a.a)(Object(a.a)({},i[c]),{},{latestResponse:t})))),"pending"===t.status&&setTimeout(o,1e3);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.next=8,o();case 8:case"end":return n.stop()}}),n)})))},p=[];return S(t)&&t.webuiDisplay&&(p=Object.keys(t.webuiDisplay).sort().map((function(e,n,r){var a=t.webuiDisplay[e],c=JSON.parse(a),o=c.message;return"html"===c.dtype&&(o=Object(W.jsx)("div",{className:d.inlineHTML,dangerouslySetInnerHTML:{__html:o}})),""===e?Object(W.jsxs)(O.a,{className:d.webuiDisplay,children:["\xa0 \xa0 ",o]}):Object(W.jsxs)(O.a,{className:d.webuiDisplay,children:["\xa0 \xa0 ",e,": ",o]})}))),Object(W.jsxs)("div",{className:d.root,children:[Object(W.jsx)(O.a,{className:d.title,children:S(t)?Object(W.jsxs)(l.a.Fragment,{children:["Actor ",t.actorId," (Profile for",[10,30,60].map((function(e){return Object(W.jsxs)(l.a.Fragment,{children:[" ",Object(W.jsxs)("span",{className:d.action,onClick:j(e),children:[e,"s"]})]},e)})),")"," ",t.state===r.Alive&&Object(W.jsx)("span",{className:d.action,onClick:function(){var e,n,a;t.state===r.Alive&&(e=t.actorId,n=t.ipAddress,a=t.port,k("/logical/kill_actor",{actorId:e,ipAddress:n,port:a}))},children:"Kill Actor"}),Object.entries(i).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1],a=r.startTime,o=r.latestResponse;return null!==o&&Object(W.jsxs)(l.a.Fragment,{children:["(","pending"===o.status?"Profiling for ".concat(Math.round((Date.now()-a)/1e3),"s..."):"finished"===o.status?Object(W.jsx)("a",{className:d.action,href:I(n),rel:"noopener noreferrer",target:"_blank",children:"Profiling result"}):"error"===o.status?"Profiling error: ".concat(o.error.trim()):void 0,")"," "]},n)}))]}):t.state===r.Infeasible?Object(W.jsxs)("span",{className:d.infeasible,children:[t.actorClass," cannot be created because the Ray cluster cannot satisfy its resource requirements."]}):Object(W.jsxs)("span",{className:d.pendingResources,children:[t.actorClass," is pending until resources are available."]})}),Object(W.jsx)(Re,{actor:t}),S(t)&&Object(W.jsx)(l.a.Fragment,{children:p.length>0&&Object(W.jsx)(l.a.Fragment,{children:p})})]})},Le=function(e){return"".concat(e,"s")},Me=Object(re.a)(G.a)({textAlign:"center"}),De=Object(h.a)((function(e){return Object(f.a)({container:{margin:e.spacing(1),padding:e.spacing(1),marginLeft:e.spacing(2)},title:{margin:e.spacing(1)},actorEntry:{width:"100%"}})})),ze=function(e){var t=e.actorGroup,n=e.title,a=De(),o=Object(s.useState)(!1),i=Object(c.a)(o,2),u=i[0],d=i[1],j=function(){return d(!u)},b=t.entries.map((function(e,t){var n;return Object(W.jsx)(G.a,{component:"div",className:a.actorEntry,children:Object(W.jsx)(Ee,{actor:e})},null!==(n=e.actorId)&&void 0!==n?n:t)})),p=r.Alive,m=r.PendingResources,h=r.Infeasible,f=t.summary;return Object(W.jsxs)(ae.a,{className:a.container,children:[Object(W.jsx)(G.a,{display:"block",className:a.title,children:Object(W.jsx)(O.a,{variant:"h5",children:n})}),Object(W.jsxs)(ce.a,{container:!0,xs:12,spacing:2,children:[Object(W.jsxs)(ce.a,{container:!0,item:!0,xs:5,className:a.title,children:[h in f.stateToCount&&Object(W.jsx)(pe,{label:Object(W.jsx)(Te,{state:h,variant:"body1",showTooltip:!0}),datum:f.stateToCount[h]}),Object(W.jsx)(pe,{label:Object(W.jsx)(Te,{state:p,variant:"body1",showTooltip:!0}),datum:p in f.stateToCount?f.stateToCount[p]:0}),Object(W.jsx)(pe,{label:Object(W.jsx)(Te,{state:m,variant:"body1",showTooltip:!0}),datum:m in f.stateToCount?f.stateToCount[m]:0})]}),Object(W.jsxs)(ce.a,{container:!0,item:!0,xs:5,className:a.title,children:[Object(W.jsx)(pe,{label:"Mean Lifetime",datum:Le(f.avgLifetime)}),Object(W.jsx)(pe,{label:"Max Lifetime",datum:Le(f.maxLifetime)}),Object(W.jsx)(pe,{label:"Executed Tasks",datum:f.numExecutedTasks})]})]}),u?Object(W.jsxs)(l.a.Fragment,{children:[Object(W.jsx)(G.a,{children:b}),Object(W.jsx)(Me,{children:Object(W.jsx)(ue,{onClick:j})})]}):Object(W.jsx)(Me,{children:Object(W.jsx)(de,{onClick:j})})]})},Pe=function(e){var t=e.actorGroups,n=function(e){var t;return null!==(t=e.summary.stateToCount[r.Infeasible])&&void 0!==t?t:0},a=ne(Object.values(t).map(n)),o=Object(s.useState)(a>0),i=Object(c.a)(o,2),u=i[0],d=i[1],j=$(Object.entries(t),(function(e,t){var r=Object(c.a)(e,2),a=r[0],o=r[1],i=Object(c.a)(t,2),s=i[0],l=i[1],u=n(o),d=n(l);return u!==d?u>d?-1:1:a>s?1:-1})).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return Object(W.jsx)(ze,{actorGroup:r,title:n},"acg-".concat(n))}));return Object(W.jsxs)(l.a.Fragment,{children:[Object(W.jsx)(Y.a,{open:u,children:Object(W.jsx)(K.a,{severity:"warning",onClose:function(){return d(!1)},children:"There are one or more actors that cannot currently be created due to insufficient cluster resources. These have been sorted to the top of the list. If you are using autoscaling functionality, you may ignore this message."})}),j]})},We=Object(h.a)((function(e){return Object(f.a)({container:{marginBottom:e.spacing(1)}})})),Be=function(e){return e.dashboard.actorGroups},Ue=function(){var e=Object(s.useState)(""),t=Object(c.a)(e,2),n=t[0],r=t[1],a=Object(q.a)(n,500),o=Object(c.a)(a,1)[0],i=We(),d=Object(u.d)(Be);if(!d)return Object(W.jsx)(O.a,{color:"textSecondary",children:"Loading..."});if(0===Object.keys(d).length)return Object(W.jsx)(O.a,{color:"textSecondary",children:"Finished loading, but have found no actors yet."});var j=""===o?Object.entries(d):Object.entries(d).filter((function(e){var t=Object(c.a)(e,2),n=t[0];t[1];return function(e,t){var n=t.toLowerCase();return-1!==e.toLowerCase().search(n)}(n,o)}));return Object(W.jsx)(G.a,{className:i.container,children:0===j.length?Object(W.jsx)(O.a,{color:"textSecondary",children:"No actors found."}):Object(W.jsxs)(l.a.Fragment,{children:[Object(W.jsxs)(H.a,{children:[Object(W.jsx)(_.a,{htmlFor:"actor-name-filter",children:"Actor Search"}),Object(W.jsx)(V.a,{id:"actor-name-filter","aria-describedby":"actor-name-helper-text",value:n,onChange:function(e){return r(e.target.value)}}),Object(W.jsx)(J.a,{id:"actor-name-helper-text",children:"Search for an actor by name"})]}),Object(W.jsx)(Pe,{actorGroups:Object.fromEntries(j)})]})})},Ge=n(468),He=n(423),_e=n(470),Ve=n(134),Je=n.n(Ve),qe=n(133),Ye=n.n(qe),Ke=n(132),Xe=n.n(Ke),Qe=n(87),Ze=Object(Qe.b)({name:"dashboard",initialState:{actorGroups:null,tab:0,rayConfig:null,nodeInfo:null,tuneInfo:null,tuneAvailability:null,lastUpdatedAt:null,error:null,memoryTable:null,shouldObtainMemoryTable:!1},reducers:{setTab:function(e,t){e.tab=t.payload},setRayConfig:function(e,t){e.rayConfig=t.payload},setNodeInfo:function(e,t){e.nodeInfo=t.payload.nodeInfo,e.lastUpdatedAt=Date.now()},setActorGroups:function(e,t){e.actorGroups=t.payload.actorGroups},setTuneInfo:function(e,t){e.tuneInfo=t.payload.result,e.lastUpdatedAt=Date.now()},setTuneAvailability:function(e,t){e.tuneAvailability=t.payload.result,e.lastUpdatedAt=Date.now()},setError:function(e,t){e.error=t.payload},setMemoryTable:function(e,t){e.memoryTable=t.payload.memoryTable},setShouldObtainMemoryTable:function(e,t){e.shouldObtainMemoryTable=t.payload}}}),$e=Ze.actions,et=Ze.reducer,tt=function(e,t){return"".concat((e/("mebibyte"===t?Math.pow(1024,2):Math.pow(1024,3))).toFixed(1)," ").concat("mebibyte"===t?"MiB":"GiB")},nt=function(e,t,n,r){var a=tt(e,n),c=tt(t,n),o=100*e/t,i="".concat(a," / ").concat(c);return r?"".concat(i," (").concat(o.toFixed(0),"%)"):i},rt=function(e){var t=Math.floor(e)%60,n=Math.floor(e/60)%60,r=Math.floor(e/60/60)%24,a=Math.floor(e/60/60/24),c=function(e){return e.toString().padStart(2,"0")};return[a?"".concat(a,"d"):"","".concat(c(r),"h"),"".concat(c(n),"m"),"".concat(c(t),"s")].join(" ")},at=function(e){try{return(e.toString().split(".")[1].length||0)<=3?e.toString():Math.abs(e.valueOf())>=1?e.toPrecision(5):e.toExponential()}catch(t){return e.toString()}},ct=Object(h.a)((function(e){return Object(f.a)({expandCollapseIcon:{color:e.palette.text.secondary,fontSize:"1.5em",verticalAlign:"middle"},container:{padding:e.spacing(1),margin:e.spacing(1)}})})),ot=function(e){var t=e.memoryTableSummary,n=ct(),r=[["Total Local Reference Count","".concat(t.totalLocalRefCount)],["Pinned in Memory Count","".concat(t.totalPinnedInMemory)],["Total Used by Pending Tasks Count","".concat(t.totalUsedByPendingTask)],["Total Captured in Objects Count","".concat(t.totalCapturedInObjects)],["Total Memory Used by Objects","".concat(tt(t.totalObjectSize,"mebibyte"))],["Total Actor Handle Count","".concat(t.totalActorHandles)]];return Object(W.jsx)(ce.a,{container:!0,className:n.container,children:r.map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return Object(W.jsx)(pe,{label:n,datum:r},n)}))})},it=n(466),st=n(467),lt=n(464),ut=n(465),dt=n(494),jt=n(463),bt=Object(re.a)(jt.a)((function(e){return{padding:e.theme.spacing(1),textAlign:"center"}})),pt=(Object(re.a)(jt.a)((function(e){return{padding:e.theme.spacing(1),textAlign:"center",cursor:"pointer"}})),Object(h.a)((function(e){return Object(f.a)({visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}})}))),mt=function(e){var t=e.order,n=e.orderBy,r=e.onRequestSort,a=e.headerInfo,c=e.firstColumnEmpty,o=pt();return Object(W.jsx)(lt.a,{children:Object(W.jsxs)(ut.a,{children:[c&&Object(W.jsx)(bt,{}),a.map((function(e){return e.sortable?Object(W.jsx)(bt,{align:e.numeric?"right":"left",sortDirection:n===e.id&&t,children:Object(W.jsxs)(dt.a,{active:n===e.id,direction:n===e.id?t:"asc",onClick:(a=e.id,function(e){r(e,a)}),children:[e.label,n===e.id?Object(W.jsx)("span",{className:o.visuallyHidden,children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.label):Object(W.jsx)(bt,{align:e.numeric?"right":"left",children:e.label},e.label);var a}))]})})},ht=function(e){var t=e.memoryTableEntry,n=-1===t.objectSize?"?":tt(t.objectSize,"mebibyte"),r=[t.nodeIpAddress,t.pid,t.type,t.objectRef,n,t.referenceType,t.callSite];return Object(W.jsx)(ut.a,{hover:!0,children:r.map((function(e,t){return Object(W.jsx)(bt,{children:e},"".concat(t))}))})},ft=Object(h.a)((function(e){return Object(f.a)({container:{margin:e.spacing(1),padding:e.spacing(1)},cell:{padding:e.spacing(1),textAlign:"center"}})})),Ot=[{id:"nodeIpAddress",label:"IP Address",numeric:!1,sortable:!0},{id:"pid",label:"PID",numeric:!1,sortable:!0},{id:"type",label:"Type",numeric:!1,sortable:!0},{id:"objectRef",label:"Object Ref",numeric:!1,sortable:!0},{id:"objectSize",label:"Object Size",numeric:!1,sortable:!0},{id:"referenceType",label:"Reference Type",numeric:!1,sortable:!0},{id:"callSite",label:"Call Site",numeric:!1,sortable:!0}],gt=function(e){var t=e.tableEntries,n=ft(),r=l.a.useState("asc"),a=Object(c.a)(r,2),o=a[0],i=a[1],s=l.a.useState(null),u=Object(c.a)(s,2),d=u[0],j=u[1],b=d&&function(e,t){return"desc"===e?function(e,n){return X(e,n,t)}:function(e,n){return-X(e,n,t)}}(o,d),p=(b?$(t,b):t).map((function(e){return Object(W.jsx)(ht,{memoryTableEntry:e},e.objectRef)}));return Object(W.jsx)(ae.a,{className:n.container,elevation:2,children:Object(W.jsxs)(it.a,{children:[Object(W.jsx)(mt,{orderBy:d,order:o,onRequestSort:function(e,t){t===d?i("asc"===o?"desc":"asc"):(j(t),i("asc"))},headerInfo:Ot,firstColumnEmpty:!1}),Object(W.jsx)(st.a,{children:p})]})})},xt=Object(re.a)(G.a)({textAlign:"center"}),vt=Object(h.a)((function(e){return Object(f.a)({container:{marginTop:e.spacing(2),marginBottom:e.spacing(2),paddingTop:e.spacing(2),paddingBottom:e.spacing(1),paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}})})),yt=function(e){var t=e.groupKey,n=e.groupTitle,r=e.entries,a=e.summary,o=e.initialExpanded,i=e.initialVisibleEntries,u=vt(),d=Object(s.useState)(o),j=Object(c.a)(d,2),b=j[0],p=j[1],m=Object(s.useState)(i),h=Object(c.a)(m,2),f=h[0],O=h[1],g=function(){return p(!b)},x=r.slice(0,f);return Object(W.jsxs)(ae.a,{className:u.container,children:[n,Object(W.jsx)(ot,{initialExpanded:!1,memoryTableSummary:a}),b?Object(W.jsxs)(l.a.Fragment,{children:[Object(W.jsx)(gt,{tableEntries:x}),Object(W.jsxs)(xt,{children:[r.length>f&&Object(W.jsx)(de,{onClick:function(){return O(f+10)}}),Object(W.jsx)(ue,{onClick:g})]})]}):Object(W.jsx)(xt,{children:Object(W.jsx)(de,{onClick:g})})]},t)},kt=function(e,t){return"node"===t?Object(W.jsx)(O.a,{variant:"h6",children:"Node ".concat(e)}):"stack_trace"===t?Object(W.jsx)(St,{stackTrace:e}):""===t?Object(W.jsx)(O.a,{variant:"h6",children:"All entries"}):Object(W.jsx)(O.a,{variant:"h6",children:"Unknown Group"})},St=function(e){var t=e.stackTrace.split(" | ").map((function(e,t){return Object(W.jsxs)(O.a,{variant:0===t?"h6":"subtitle2",style:{marginLeft:"".concat(t,"em")},children:[0!==t&&Object(W.jsx)(Xe.a,{}),e]},t)}));return Object(W.jsx)(G.a,{children:t})},Nt=Object(h.a)((function(e){return Object(f.a)({pauseButton:{margin:e.spacing(1),padding:e.spacing(1),float:"right"},select:{minWidth:"7em"}})})),Ct=function(e){return e.dashboard.memoryTable},wt=function(e){return 0===Object.keys(e.group).length},Tt=function(e){return Math.abs(((new Date).getTime()-e.getTime())/1e3)>10},It=function(){var e=Object(u.d)(Ct),t=Object(u.c)(),n=new Date,r=Object(s.useState)(!1),a=Object(c.a)(r,2),o=a[0],i=a[1],l=o?Object(W.jsx)(Ye.a,{}):Object(W.jsx)(Je.a,{}),d=Nt(),j=Object(s.useState)("node"),b=Object(c.a)(j,2),p=b[0],m=b[1];Object(s.useEffect)((function(){return E(!0),function(){E(!1)}}),[]);var h=Object(s.useCallback)((function(){}),[p,t]),f=Object(s.useRef)(null);if(Object(s.useEffect)((function(){f.current||o||(h(),f.current=setInterval(h,4e3));return function(){f.current&&(clearInterval(f.current),f.current=null)}}),[o,h,t]),!e||wt(e)&&!Tt(n))return Object(W.jsxs)(O.a,{align:"center",color:"textSecondary",variant:"h3",children:[Object(W.jsx)(Ge.a,{})," Loading"]});if(wt(e)&&Tt(n))return Object(W.jsx)(O.a,{align:"center",color:"textSecondary",variant:"h3",children:"Finished loading, but nothing found."});var x=Object.entries(e.group).sort((function(e,t){return Object(c.a)(e,1)[0]<Object(c.a)(t,1)[0]?-1:1})).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return Object(W.jsx)(yt,{groupKey:n,groupTitle:kt(n,p),entries:r.entries,summary:r.summary,initialExpanded:!1,initialVisibleEntries:10},n)}));return Object(W.jsxs)(G.a,{children:[Object(W.jsxs)(H.a,{children:[Object(W.jsx)(_.a,{shrink:!0,id:"group-by-label",children:"Group by"}),Object(W.jsxs)(He.a,{labelId:"group-by-label",value:p,className:d.select,onChange:function(e){return m(e.target.value)},color:"primary",displayEmpty:!0,children:[Object(W.jsx)(_e.a,{value:"",children:Object(W.jsx)("em",{children:"None"})}),Object(W.jsx)(_e.a,{value:"node",children:"Node IP Address"}),Object(W.jsx)(_e.a,{value:"stack_trace",children:"Stack Trace"})]})]}),Object(W.jsxs)(g.a,{color:"primary",className:d.pauseButton,onClick:function(){f.current&&(clearInterval(f.current),f.current=null),E(!o),i(!o)},children:[l,o?"Resume Collection":"Pause Collection"]}),x]})},Ft=n(473),Rt=n(490),At=n(11),Et=n(472),Lt=n(413),Mt=n(135),Dt=n.n(Mt),zt=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.handleClose,r=e.title;return Object(W.jsxs)(Et.a,{classes:{paper:t.paper},fullWidth:!0,maxWidth:"md",onClose:n,open:!0,scroll:"body",children:[Object(W.jsx)(Lt.a,{className:t.closeButton,onClick:n,children:Object(W.jsx)(Dt.a,{})}),Object(W.jsx)(O.a,{className:t.title,children:r}),this.props.children]})}}]),n}(l.a.Component),Pt=Object(P.a)((function(e){return Object(f.a)({paper:{padding:e.spacing(3)},closeButton:{position:"absolute",right:e.spacing(1.5),top:e.spacing(1.5),zIndex:1},title:{borderBottomColor:e.palette.divider,borderBottomStyle:"solid",borderBottomWidth:1,fontSize:"1.5rem",lineHeight:1,marginBottom:e.spacing(3),paddingBottom:e.spacing(3)}})}))(zt),Wt=n(57),Bt=n.n(Wt),Ut=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.lines;return Object(W.jsx)(it.a,{children:Object(W.jsx)(st.a,{children:n.map((function(e,n){return Object(W.jsxs)(ut.a,{children:[Object(W.jsx)(jt.a,{className:Bt()(t.cell,t.lineNumber),"data-line-number":n+1}),Object(W.jsx)(jt.a,{className:Bt()(t.cell,t.line),children:e})]},n)}))})})}}]),n}(l.a.Component),Gt=Object(P.a)((function(e){return Object(f.a)({root:{overflowX:"auto"},cell:{borderWidth:0,fontFamily:"SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace",padding:0,"&:last-child":{paddingRight:0}},lineNumber:{color:e.palette.text.secondary,paddingRight:e.spacing(2),textAlign:"right",verticalAlign:"top",width:"1%","&::before":{content:"attr(data-line-number)"}},line:{textAlign:"left",whiteSpace:"pre-wrap"}})}))(Ut),Ht=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(L.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={result:null,error:null},e}return Object(M.a)(n,[{key:"componentDidMount",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t,n,r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props,n=t.nodeIp,r=t.pid,e.next=4,C(n,r);case 4:a=e.sent,this.setState({result:a.errors,error:null}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.setState({result:null,error:e.t0.toString()});case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.clearErrorDialog,r=e.nodeIp,a=this.state,o=a.result,i=a.error;return Object(W.jsx)(Pt,{handleClose:n,title:"Errors",children:null!==i?Object(W.jsx)(O.a,{color:"error",children:i}):null===o?Object(W.jsx)(O.a,{color:"textSecondary",children:"Loading..."}):Object.entries(o).map((function(e){var n=Object(c.a)(e,2),a=n[0],o=n[1];return Object(W.jsxs)(l.a.Fragment,{children:[Object(W.jsxs)(O.a,{className:t.header,children:[r," (PID: ",a,")"]}),o.length>0?o.map((function(e,n){var r=e.message,a=e.timestamp;return Object(W.jsxs)("div",{className:t.error,children:[Object(W.jsxs)(O.a,{className:t.timestamp,children:["Error at ",new Date(1e3*a).toLocaleString()]}),Object(W.jsx)(Gt,{lines:r.trim().split("\n")})]},n)})):Object(W.jsx)(O.a,{color:"textSecondary",children:"No errors found."})]},a)}))})}}]),n}(l.a.Component),_t=Object(P.a)((function(e){return Object(f.a)({header:{lineHeight:1,marginBottom:e.spacing(3),marginTop:e.spacing(3)},error:{backgroundColor:Object(At.c)(e.palette.error.main,.04),borderLeftColor:e.palette.error.main,borderLeftStyle:"solid",borderLeftWidth:2,marginTop:e.spacing(3),padding:e.spacing(2)},timestamp:{color:e.palette.text.secondary,marginBottom:e.spacing(1)}})}))(Ht),Vt=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(L.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={result:null,error:null},e}return Object(M.a)(n,[{key:"componentDidMount",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t,n,r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props,n=t.nodeIp,r=t.pid,e.next=4,w(n,r);case 4:a=e.sent,this.setState({result:a.logs,error:null}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.setState({result:null,error:e.t0.toString()});case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.clearLogDialog,r=e.nodeIp,a=this.state,o=a.result,i=a.error;return Object(W.jsx)(Pt,{handleClose:n,title:"Logs",children:null!==i?Object(W.jsx)(O.a,{color:"error",children:i}):null===o?Object(W.jsx)(O.a,{color:"textSecondary",children:"Loading..."}):Object.entries(o).map((function(e){var n=Object(c.a)(e,2),a=n[0],o=n[1];return Object(W.jsxs)(l.a.Fragment,{children:[Object(W.jsxs)(O.a,{className:t.header,children:[r," (PID: ",a,")"]}),o.length>0?Object(W.jsx)("div",{className:t.log,children:Object(W.jsx)(Gt,{lines:o})}):Object(W.jsx)(O.a,{color:"textSecondary",children:"No logs found."})]},a)}))})}}]),n}(l.a.Component),Jt=Object(P.a)((function(e){return Object(f.a)({header:{lineHeight:1,marginBottom:e.spacing(3),marginTop:e.spacing(3)},log:{backgroundColor:Object(At.c)(e.palette.primary.main,.04),borderLeftColor:e.palette.primary.main,borderLeftStyle:"solid",borderLeftWidth:2,padding:e.spacing(2)}})}))(Vt),qt={id:"cpu",ClusterFeatureRenderFn:function(e){var t=e.nodes,n=te(t.map((function(e){return{weight:e.cpus[0],value:e.cpu}})));return Object(W.jsx)("div",{style:{minWidth:60},children:Object(W.jsx)(Oe,{percent:n,text:"".concat(n.toFixed(1),"%")})})},NodeFeatureRenderFn:function(e){var t=e.node;return Object(W.jsx)("div",{style:{minWidth:60},children:Object(W.jsx)(Oe,{percent:t.cpu,text:"".concat(t.cpu.toFixed(1),"%")})})},WorkerFeatureRenderFn:function(e){var t=e.worker;return Object(W.jsx)("div",{style:{minWidth:60},children:Object(W.jsx)(Oe,{percent:t.cpuPercent,text:"".concat(t.cpuPercent.toFixed(1),"%")})})},nodeAccessor:function(e){return e.node.cpu},workerAccessor:function(e){return e.worker.cpuPercent}},Yt=qt,Kt={id:"disk",ClusterFeatureRenderFn:function(e){var t,n=e.nodes,r=0,a=0,c=Object(ee.a)(n);try{for(c.s();!(t=c.n()).done;){var o=t.value;"/"in o.disk&&(r+=o.disk["/"].used,a+=o.disk["/"].total)}}catch(i){c.e(i)}finally{c.f()}return Object(W.jsx)(Oe,{percent:100*r/a,text:nt(r,a,"gibibyte",!0)})},NodeFeatureRenderFn:function(e){var t=e.node;return Object(W.jsx)(Oe,{percent:100*t.disk["/"].used/t.disk["/"].total,text:nt(t.disk["/"].used,t.disk["/"].total,"gibibyte",!0)})},WorkerFeatureRenderFn:function(){return Object(W.jsx)(O.a,{color:"textSecondary",component:"span",variant:"inherit",children:"N/A"})},nodeAccessor:function(e){return e.node.disk["/"].used}},Xt=Kt,Qt=n(3),Zt=["classes"],$t=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=Object(Qt.a)(e,Zt);return Object(W.jsx)("span",Object(a.a)({className:t.button},n))}}]),n}(l.a.Component),en=Object(P.a)((function(e){return Object(f.a)({button:{color:e.palette.primary.main,"&:hover":{cursor:"pointer",textDecoration:"underline"}}})}))($t),tn=function(e){var t=e.nodes,n=ne(t.map((function(e){var t;return null!==(t=e.errorCount)&&void 0!==t?t:0})));return 0===n?Object(W.jsx)(O.a,{color:"textSecondary",component:"span",variant:"inherit",children:"No errors"}):Object(W.jsxs)(l.a.Fragment,{children:[n.toLocaleString()," ",1===n?"error":"errors"]})},nn=function(e){return function(t){var n,r=t.node,a=null!==(n=r.errorCount)&&void 0!==n?n:0;return 0===a?Object(W.jsx)(O.a,{color:"textSecondary",component:"span",variant:"inherit",children:"No errors"}):Object(W.jsxs)(en,{onClick:function(){return e(r.ip,null)},children:["View all errors (",a.toLocaleString(),")"]})}},rn=function(e){var t;return null!==(t=e.node.errorCount)&&void 0!==t?t:0},an=function(e){return function(t){var n,r=t.node,a=t.worker;return 0!==a.errorCount?Object(W.jsxs)(en,{onClick:function(){return e(r.ip,a.pid)},children:["View errors (",null===(n=a.errorCount)||void 0===n?void 0:n.toLocaleString(),")"]}):Object(W.jsx)(O.a,{color:"textSecondary",component:"span",variant:"inherit",children:"No errors"})}},cn=function(e){var t;return null!==(t=e.worker.errorCount)&&void 0!==t?t:0},on=function(e){return{id:"errors",ClusterFeatureRenderFn:tn,WorkerFeatureRenderFn:an(e),NodeFeatureRenderFn:nn(e),nodeAccessor:rn,workerAccessor:cn}},sn=Object(re.a)(O.a)((function(e){return{paddingRight:e.theme.spacing(1)}})),ln=function(e){if(null===e.gpus)return NaN;var t=e.gpus.filter((function(e){return e.utilizationGpu}));return 0===t.length?NaN:ne(t.map((function(e){var t;return null!==(t=e.utilizationGpu)&&void 0!==t?t:0})))/t.length},un=function(e){var t=e.gpu,n=e.slot;return Object(W.jsxs)(G.a,{display:"flex",style:{minWidth:120},children:[Object(W.jsx)(je.a,{title:t.name,children:Object(W.jsxs)(sn,{variant:"body1",children:["[",n,"]:"]})}),t.utilizationGpu?Object(W.jsx)(Oe,{percent:t.utilizationGpu,text:"".concat(t.utilizationGpu.toFixed(1),"%")}):Object(W.jsx)(O.a,{color:"textSecondary",component:"span",variant:"inherit",children:"N/A"})]})},dn=function(e){var t=e.resourceSlot,n=t.allocation,r=t.slot,a=n>=1&&void 0===r?"0":void 0===r?"?":r.toString();return Object(W.jsxs)(O.a,{variant:"body1",children:["[",a,"]: ",n]})},jn={id:"gpu",ClusterFeatureRenderFn:function(e){var t=function(e){var t=e.map((function(e){return{weight:e.gpus.length,value:ln(e)}})).filter((function(e){return!isNaN(e.value)}));return 0===t.length?NaN:te(t)}(e.nodes);return Object(W.jsx)("div",{style:{minWidth:120},children:isNaN(t)?Object(W.jsx)(O.a,{color:"textSecondary",component:"span",variant:"inherit",children:"N/A"}):Object(W.jsx)(Oe,{percent:t,text:"".concat(t.toFixed(1),"%")})})},NodeFeatureRenderFn:function(e){var t=e.node,n=void 0!==t.gpus&&0!==t.gpus.length;return Object(W.jsx)("div",{style:{minWidth:120},children:n?t.gpus.map((function(e,t){return Object(W.jsx)(un,{gpu:e,slot:t})})):Object(W.jsx)(O.a,{color:"textSecondary",component:"span",variant:"inherit",children:"N/A"})})},WorkerFeatureRenderFn:function(e){var t,n,r=null===(t=e.worker.coreWorkerStats[0])||void 0===t?void 0:t.usedResources,a=null===r||void 0===r?void 0:r.GPU;return n=void 0===a?Object(W.jsx)(O.a,{color:"textSecondary",component:"span",variant:"inherit",children:"N/A"}):a.resourceSlots.sort((function(e,t){return void 0===e.slot&&void 0===t.slot?0:void 0===e.slot?1:void 0===t.slot?-1:e.slot-t.slot})).map((function(e){return Object(W.jsx)(dn,{resourceSlot:e})})),Object(W.jsx)("div",{style:{minWidth:60},children:n})},nodeAccessor:function(e){var t=e.node;return ln(t)},workerAccessor:function(e){var t;return null!==(t=function(e){var t,n=null===e||void 0===e||null===(t=e.coreWorkerStats[0])||void 0===t?void 0:t.usedResources,r=null===n||void 0===n?void 0:n.GPU;return r&&ne(r.resourceSlots.map((function(e){return e.allocation})))}(e.worker))&&void 0!==t?t:0}},bn=function(e){var t=function(e){return e.memoryUsed&&e.memoryTotal?e.memoryUsed/e.memoryTotal:NaN};return 0===e.gpus.map(t).filter((function(e){return!!e})).length?NaN:100*(ne(e.gpus.map((function(e){return t(e)})))/e.gpus.length)},pn=function(e){var t=e.gpuName,n=e.slot,r=function(e,t){return"".concat(e," MiB / ").concat(t," MiB")}(e.utilization,e.total);return Object(W.jsx)(G.a,{display:"flex",style:{minWidth:120},children:Object(W.jsx)(je.a,{title:t,children:Object(W.jsxs)(sn,{variant:"body1",children:["[",n,"]: ",r]})})})},mn={id:"gram",ClusterFeatureRenderFn:function(e){var t=function(e){var t=e.map((function(e){return{weight:e.gpus.length,value:bn(e)}})).filter((function(e){return!isNaN(e.value)}));return 0===t.length?NaN:te(t)}(e.nodes);return Object(W.jsx)("div",{style:{minWidth:60},children:isNaN(t)?Object(W.jsx)(O.a,{color:"textSecondary",component:"span",variant:"inherit",children:"N/A"}):Object(W.jsx)(Oe,{percent:t,text:"".concat(t.toFixed(1),"%")})})},NodeFeatureRenderFn:function(e){var t=e.node.gpus.map((function(e,t){var n={gpuName:e.name,utilization:e.memoryUsed,total:e.memoryTotal,slot:t};return Object(W.jsx)(pn,Object(a.a)({},n))}));return Object(W.jsx)("div",{style:{minWidth:60},children:0===t.length?Object(W.jsx)(O.a,{color:"textSecondary",component:"span",variant:"inherit",children:"N/A"}):Object(W.jsx)("div",{style:{minWidth:120},children:t})})},WorkerFeatureRenderFn:function(e){var t=e.worker,n=e.node.gpus.map((function(e,n){var r=e.processes.find((function(e){return e.pid===t.pid}));if(r){var c={gpuName:e.name,total:e.memoryTotal,utilization:r.gpuMemoryUsage,slot:n};return Object(W.jsx)(pn,Object(a.a)({},c))}})).filter((function(e){return void 0!==e}));return 0===n.length?Object(W.jsx)(O.a,{color:"textSecondary",component:"span",variant:"inherit",children:"N/A"}):Object(W.jsx)("div",{style:{minWidth:120},children:n})},nodeAccessor:function(e){var t=e.node,n=bn(t);return isNaN(n)?-1:n},workerAccessor:function(e){var t=e.worker,n=e.node;return 0===n.gpus.length?-1:function(e,t){var n=t.gpus.map((function(e){return e.processes})).map((function(t){return t.find((function(t){return t.pid===e.pid}))})).map((function(e){return(null===e||void 0===e?void 0:e.gpuMemoryUsage)||0}));return ne(n)}(t,n)}},hn={id:"host",ClusterFeatureRenderFn:function(e){var t=e.nodes;return Object(W.jsxs)(l.a.Fragment,{children:["Totals (",t.length.toLocaleString()," ",1===t.length?"host":"hosts",")"]})},NodeFeatureRenderFn:function(e){var t=e.node;return Object(W.jsxs)(l.a.Fragment,{children:[t.hostname," (",t.ip,")"]})},WorkerFeatureRenderFn:function(e){var t=e.worker;return Object(W.jsxs)(l.a.Fragment,{children:[t.cmdline[0].split("::",2)[0]," (PID: ",t.pid,")"]})},nodeAccessor:function(e){return e.node.hostname}},fn=function(e){var t=e.nodes,n=ne(t.map((function(e){var t;return null!==(t=e.logCount)&&void 0!==t?t:0})));return 0===n?Object(W.jsx)(O.a,{color:"textSecondary",component:"span",variant:"inherit",children:"No logs"}):Object(W.jsxs)(l.a.Fragment,{children:[n.toLocaleString()," ",1===n?"line":"lines"]})},On=function(e){return function(t){var n,r=t.node,a=null!==(n=r.logCount)&&void 0!==n?n:0;return 0===a?Object(W.jsx)(O.a,{color:"textSecondary",component:"span",variant:"inherit",children:"No logs"}):Object(W.jsxs)(en,{onClick:function(){return e(r.ip,null)},children:["View all logs (",a.toLocaleString()," ",1===r.logCount?"line":"lines",")"]})}},gn=function(e){var t=e.node;return t.logCount?ne(Object.values(t.logCount)):0},xn=function(e){return function(t){var n,r=t.worker,a=t.node,c=null!==(n=r.logCount)&&void 0!==n?n:0;return 0!==c?Object(W.jsxs)(en,{onClick:function(){return e(a.ip,r.pid)},children:["View log (",c.toLocaleString()," ",1===r.logCount?"line":"lines",")"]}):Object(W.jsx)(O.a,{color:"textSecondary",component:"span",variant:"inherit",children:"No logs"})}},vn=function(e){var t;return null!==(t=e.worker.logCount)&&void 0!==t?t:0},yn=function(e){return{id:"logs",ClusterFeatureRenderFn:fn,WorkerFeatureRenderFn:xn(e),NodeFeatureRenderFn:On(e),workerAccessor:vn,nodeAccessor:gn}},kn={id:"objectStoreMemory",ClusterFeatureRenderFn:function(e){var t=e.nodes,n=ne(t.map((function(e){return e.raylet.objectStoreAvailableMemory}))),r=ne(t.map((function(e){return e.raylet.objectStoreUsedMemory}))),a=r+n;return Object(W.jsx)("div",{style:{minWidth:60},children:Object(W.jsx)(Oe,{percent:r/a*100,text:nt(r,a,"mebibyte",!1)})})},NodeFeatureRenderFn:function(e){var t=e.node,n=t.raylet.objectStoreAvailableMemory,r=t.raylet.objectStoreUsedMemory,a=n+r;if(void 0===r||void 0===n||0===a)return Object(W.jsx)(O.a,{color:"textSecondary",component:"span",variant:"inherit",children:"N/A"});var c=r/a;return Object(W.jsx)("div",{style:{minWidth:60},children:Object(W.jsx)(Oe,{percent:100*c,text:nt(r,a,"mebibyte",!1)})})},WorkerFeatureRenderFn:function(){return Object(W.jsx)(O.a,{color:"textSecondary",component:"span",variant:"inherit",children:"N/A"})},nodeAccessor:function(e){return e.node.raylet.objectStoreUsedMemory},workerAccessor:function(){return 0}},Sn={id:"ram",ClusterFeatureRenderFn:function(e){var t,n=e.nodes,r=0,a=0,c=Object(ee.a)(n);try{for(c.s();!(t=c.n()).done;){var o=t.value;r+=o.mem[0]-o.mem[1],a+=o.mem[0]}}catch(i){c.e(i)}finally{c.f()}return Object(W.jsx)(Oe,{percent:100*r/a,text:nt(r,a,"gibibyte",!0)})},NodeFeatureRenderFn:function(e){var t=e.node;return Object(W.jsx)(Oe,{percent:100*(t.mem[0]-t.mem[1])/t.mem[0],text:nt(t.mem[0]-t.mem[1],t.mem[0],"gibibyte",!0)})},WorkerFeatureRenderFn:function(e){var t=e.node,n=e.worker;return Object(W.jsx)(Oe,{percent:100*n.memoryInfo.rss/t.mem[0],text:tt(n.memoryInfo.rss,"mebibyte")})},nodeAccessor:function(e){var t=e.node;return 100*(t.mem[0]-t.mem[1])},workerAccessor:function(e){return e.worker.memoryInfo.rss}},Nn={id:"received",ClusterFeatureRenderFn:function(e){var t,n=e.nodes,r=0,a=Object(ee.a)(n);try{for(a.s();!(t=a.n()).done;){r+=t.value.networkSpeed[1]}}catch(c){a.e(c)}finally{a.f()}return Object(W.jsxs)(l.a.Fragment,{children:[tt(r,"mebibyte"),"/s"]})},NodeFeatureRenderFn:function(e){var t=e.node;return Object(W.jsxs)(l.a.Fragment,{children:[tt(t.networkSpeed[1],"mebibyte"),"/s"]})},WorkerFeatureRenderFn:function(){return Object(W.jsx)(O.a,{color:"textSecondary",component:"span",variant:"inherit",children:"N/A"})},nodeAccessor:function(e){return e.node.networkSpeed[1]}},Cn={id:"sent",ClusterFeatureRenderFn:function(e){var t,n=e.nodes,r=0,a=Object(ee.a)(n);try{for(a.s();!(t=a.n()).done;){r+=t.value.networkSpeed[0]}}catch(c){a.e(c)}finally{a.f()}return Object(W.jsxs)(l.a.Fragment,{children:[tt(r,"mebibyte"),"/s"]})},NodeFeatureRenderFn:function(e){var t=e.node;return Object(W.jsxs)(l.a.Fragment,{children:[tt(t.networkSpeed[0],"mebibyte"),"/s"]})},WorkerFeatureRenderFn:function(){return Object(W.jsx)(O.a,{color:"textSecondary",component:"span",variant:"inherit",children:"N/A"})},nodeAccessor:function(e){return e.node.networkSpeed[0]}},wn=function(e){return Date.now()/1e3-e},Tn={id:"uptime",NodeFeatureRenderFn:function(e){var t=e.node;return Object(W.jsx)(l.a.Fragment,{children:rt(wn(t.bootTime))})},WorkerFeatureRenderFn:function(e){var t=e.worker;return Object(W.jsx)(l.a.Fragment,{children:rt(wn(t.createTime))})},nodeAccessor:function(e){var t=e.node;return wn(t.bootTime)},workerAccessor:function(e){var t=e.worker;return wn(t.createTime)}},In={id:"workers",ClusterFeatureRenderFn:function(e){var t,n=e.nodes,r=0,a=0,c=Object(ee.a)(n);try{for(c.s();!(t=c.n()).done;){var o=t.value;r+=o.cpus[0],a+=o.workers.length}}catch(i){c.e(i)}finally{c.f()}return Object(W.jsxs)(l.a.Fragment,{children:[a.toLocaleString()," ",1===a?"worker":"workers"," / ",r.toLocaleString()," ",1===r?"core":"cores"]})},NodeFeatureRenderFn:function(e){var t=e.node,n=t.cpus[0],r=t.workers.length;return Object(W.jsxs)(l.a.Fragment,{children:[r.toLocaleString()," ",1===r?"worker":"workers"," / ",n.toLocaleString()," ",1===n?"core":"cores"]})},WorkerFeatureRenderFn:function(e){var t=e.worker;return Object(W.jsx)(l.a.Fragment,{children:t.cmdline[0].split("::",2)[1]})}},Fn=n(136),Rn=n.n(Fn),An=n(137),En=n.n(An),Ln=function(e){var t=e.features,n=e.data,r=n.node,a=n.worker;return Object(W.jsxs)(ut.a,{hover:!0,children:[Object(W.jsx)(bt,{}),t.map((function(e,t){return Object(W.jsx)(bt,{children:Object(W.jsx)(e,{node:r,worker:a})},t)}))]})},Mn=Object(h.a)((function(e){return Object(f.a)({cell:{padding:e.spacing(1),textAlign:"center","&:last-child":{paddingRight:e.spacing(1)}},expandCollapseCell:{cursor:"pointer"},expandCollapseIcon:{color:e.palette.text.secondary,fontSize:"1.5em",verticalAlign:"middle"},extraInfo:{fontFamily:"SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace",whiteSpace:"pre"}})})),Dn=function(e){var t=e.features,n=e.node,r=e.initialExpanded,a=e.rayletInfo,o=e.workerFeatureData,i=Object(s.useState)(r),u=Object(c.a)(i,2),d=u[0],j=u[1],b=Mn(),p=t.map((function(e,t){var r=e.NodeFeatureRenderFn;return Object(W.jsx)(bt,{className:b.cell,children:Object(W.jsx)(r,{node:n})},t)}));return Object(W.jsxs)(l.a.Fragment,{children:[Object(W.jsxs)(ut.a,{hover:!0,children:[Object(W.jsx)(jt.a,{className:Bt()(b.cell,b.expandCollapseCell),onClick:function(){return j(!d)},children:d?Object(W.jsx)(En.a,{className:b.expandCollapseIcon}):Object(W.jsx)(Rn.a,{className:b.expandCollapseIcon})}),p]}),d&&Object(W.jsxs)(l.a.Fragment,{children:[void 0!==a&&Object(W.jsxs)(ut.a,{hover:!0,children:[Object(W.jsx)(jt.a,{className:b.cell}),Object(W.jsx)(jt.a,{className:Bt()(b.cell,b.extraInfo),colSpan:t.length,children:a})]}),o.map((function(e,n){return Object(W.jsx)(Ln,{features:t.map((function(e){return e.WorkerFeatureRenderFn})),data:e},n)}))]})]})},zn=n(138),Pn=n.n(zn),Wn=Object(h.a)((function(e){return Object(f.a)({cell:{borderTopColor:e.palette.divider,borderTopStyle:"solid",borderTopWidth:2,padding:e.spacing(1),textAlign:"center","&:last-child":{paddingRight:e.spacing(1)}},totalIcon:{color:e.palette.text.secondary,fontSize:"1.5em",verticalAlign:"middle"}})})),Bn=function(e){var t=e.nodes,n=e.features,r=Wn();return Object(W.jsxs)(ut.a,{hover:!0,children:[Object(W.jsx)(jt.a,{className:r.cell,children:Object(W.jsx)(Pn.a,{className:r.totalIcon})}),n.map((function(e,n){return e?Object(W.jsx)(jt.a,{className:r.cell,children:Object(W.jsx)(e,{nodes:t})},n):Object(W.jsx)(bt,{},n)}))]})},Un=function(e,t){var n=e.sort((function(e,t){var n=e.worker,r=t.worker;return"ray::IDLE"===r.cmdline[0]?-1:"ray::IDLE"===n.cmdline[0]?1:n.pid<r.pid?-1:1}));return t?$(n,t):n},Gn=Object(h.a)((function(e){return Object(f.a)({table:{marginTop:e.spacing(1)},cell:{padding:e.spacing(1),textAlign:"center","&:last-child":{paddingRight:e.spacing(1)}}})})),Hn=function(e){var t,n;return null===(t=e.dashboard)||void 0===t||null===(n=t.nodeInfo)||void 0===n?void 0:n.clients.filter((function(e){return"ALIVE"===e.raylet.state}))},_n=[{id:"host",label:"Host",numeric:!0,sortable:!0},{id:"workers",label:"PID",numeric:!0,sortable:!1},{id:"uptime",label:"Uptime (s)",numeric:!0,sortable:!0},{id:"cpu",label:"CPU",numeric:!1,sortable:!0},{id:"ram",label:"RAM",numeric:!0,sortable:!0},{id:"gpu",label:"GPU",numeric:!0,sortable:!0},{id:"gram",label:"GRAM",numeric:!0,sortable:!0},{id:"objectStoreMemory",label:"Plasma",numeric:!1,sortable:!0},{id:"disk",label:"Disk",numeric:!0,sortable:!0},{id:"sent",label:"Sent",numeric:!0,sortable:!0},{id:"received",label:"Received",numeric:!1,sortable:!0},{id:"logs",label:"Logs",numeric:!1,sortable:!0},{id:"errors",label:"Errors",numeric:!1,sortable:!0}],Vn=function(){var e,t,n=Object(s.useState)(null),r=Object(c.a)(n,2),a=r[0],o=r[1],i=Object(s.useState)(null),d=Object(c.a)(i,2),j=d[0],b=d[1],p=Object(s.useState)(!0),m=Object(c.a)(p,2),h=m[0],f=m[1],g=l.a.useState("asc"),x=Object(c.a)(g,2),v=x[0],y=x[1],k=l.a.useState(null),S=Object(c.a)(k,2),N=S[0],C=S[1],w=Gn(),T=Object(u.d)(Hn);if(!T)return Object(W.jsx)(O.a,{color:"textSecondary",children:"Loading..."});var I=ne(T.map((function(e){return e.workers.length}))),F=[hn,In,Tn,Yt,Sn,jn,mn,kn,Xt,Cn,Nn,yn((function(e,t){return o({nodeIp:e,pid:t})})),on((function(e,t){return b({nodeIp:e,pid:t})}))],R=null===(e=F.find((function(e){return e.id===N})))||void 0===e?void 0:e.nodeAccessor,A=R&&Z(v,R),E=null===(t=F.find((function(e){return e.id===N})))||void 0===t?void 0:t.workerAccessor,L=E&&Z(v,E),M=0!==T.map((function(e){return e.gpus})).filter((function(e){return 0!==e.length})).length,D=0!==T.filter((function(e){return e.disk["/"].total>10})).length,z=function(e){return(M||"gpu"!==e.id&&"gram"!==e.id)&&(D||"disk"!==e.id)},P=F.filter(z),B=_n.filter(z),U=h?function(e,t,n,r){return(n?$(e,n):e).map((function(n){var a=n.workers.map((function(e){return{node:n,worker:e}})),c=Un(a,t);return Object(W.jsx)(Dn,{node:n,workerFeatureData:c,features:r,initialExpanded:e.length<=1},n.raylet.nodeId)}))}(T,L,A,P):function(e,t,n){var r=n.map((function(e){return e.WorkerFeatureRenderFn})),a=e.flatMap((function(e){return e.workers.map((function(t){return{node:e,worker:t}}))}));return Un(a,t).map((function(e,t){return Object(W.jsx)(Ln,{features:r,data:e},"worker-".concat(t))}))}(T,L,P);return Object(W.jsxs)(l.a.Fragment,{children:[Object(W.jsx)(Ft.a,{control:Object(W.jsx)(Rt.a,{checked:h,onChange:function(){return f(!h)},color:"primary"}),label:"Group by host"}),Object(W.jsxs)(it.a,{className:w.table,children:[Object(W.jsx)(mt,{onRequestSort:function(e,t){t===N?y("asc"===v?"desc":"asc"):(C(t),y("asc"))},headerInfo:B,order:v,orderBy:N,firstColumnEmpty:!0}),Object(W.jsxs)(st.a,{children:[U,Object(W.jsx)(Bn,{clusterTotalWorkers:I,nodes:T,features:P.map((function(e){return e.ClusterFeatureRenderFn}))})]})]}),null!==a&&Object(W.jsx)(Jt,{clearLogDialog:function(){return o(null)},nodeIp:a.nodeIp,pid:a.pid}),null!==j&&Object(W.jsx)(_t,{clearErrorDialog:function(){return b(null)},nodeIp:j.nodeIp,pid:j.pid})]})},Jn=Object(h.a)((function(e){return Object(f.a)({table:{marginTop:e.spacing(1),width:"auto"},cell:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1),paddingLeft:e.spacing(3),paddingRight:e.spacing(3),textAlign:"center","&:last-child":{paddingRight:e.spacing(3)}},key:{color:e.palette.text.secondary}})})),qn=$e.setRayConfig,Yn=$e.setError,Kn=function(e){return e.dashboard.rayConfig},Xn=function(){var e=Jn(),t=Object(u.d)(Kn),n=Object(u.c)(),r=Object(s.useCallback)(Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k("/api/ray_config",{});case 3:t=e.sent,n(qn(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(Yn(e.t0.toString()));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[n]),a=Object(s.useRef)(null);if(Object(s.useEffect)((function(){null===a.current&&(r(),a.current=setInterval(r,1e4));return function(){clearInterval(a.current)}}),[r]),null===t)return Object(W.jsx)(O.a,{color:"textSecondary",children:"No Ray configuration detected."});var c=[{key:"Autoscaling mode",value:t.autoscalingMode},{key:"Head node type",value:t.headType},{key:"Worker node type",value:t.workerType},{key:"Min worker nodes",value:t.minWorkers},{key:"Initial worker nodes",value:t.initialWorkers},{key:"Max worker nodes",value:t.maxWorkers},{key:"Idle timeout",value:"".concat(t.idleTimeoutMinutes," ").concat(1===t.idleTimeoutMinutes?"minute":"minutes")}];return Object(W.jsxs)("div",{children:[Object(W.jsx)(O.a,{children:"Ray cluster configuration:"}),Object(W.jsxs)(it.a,{className:e.table,children:[Object(W.jsx)(lt.a,{children:Object(W.jsxs)(ut.a,{children:[Object(W.jsx)(jt.a,{className:e.cell,children:"Setting"}),Object(W.jsx)(jt.a,{className:e.cell,children:"Value"})]})}),Object(W.jsx)(st.a,{children:c.map((function(t,n){var r=t.key,a=t.value;return Object(W.jsxs)(ut.a,{children:[Object(W.jsx)(jt.a,{className:Bt()(e.cell,e.key),children:r}),Object(W.jsx)(jt.a,{className:e.cell,children:a})]},n)}))})]})]})},Qn=n(476),Zn=n(474),$n=$e,er=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(L.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={currentError:"",open:!1},e.handleOpen=function(t){e.setState({open:!0,currentError:t})},e.handleClose=function(){e.setState({open:!1})},e}return Object(M.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.tuneInfo,a=this.state,c=a.currentError,o=a.open;return null===r||0===Object.keys(r.errors).length?null:Object(W.jsxs)(l.a.Fragment,{children:[Object(W.jsxs)(it.a,{className:n.table,children:[Object(W.jsx)(lt.a,{children:Object(W.jsxs)(ut.a,{children:[Object(W.jsx)(jt.a,{className:n.cell,children:" Job ID"}),Object(W.jsx)(jt.a,{className:n.cell,children:" Trial ID "}),Object(W.jsx)(jt.a,{className:n.cell,children:" Trial Directory "}),Object(W.jsx)(jt.a,{className:n.cell,children:" Error "})]})}),Object(W.jsx)(st.a,{children:null!==r.errors&&Object.keys(r.errors).map((function(t,a){return Object(W.jsxs)(ut.a,{children:[Object(W.jsx)(jt.a,{className:n.cell,children:r.errors[t].jobId}),Object(W.jsx)(jt.a,{className:n.cell,children:r.errors[t].trialId}),Object(W.jsx)(jt.a,{className:n.cell,children:t}),Object(W.jsx)(jt.a,{className:n.cell,children:Object(W.jsx)(Zn.a,{component:"button",variant:"body2",onClick:function(){e.handleOpen(t)},children:"Show Error"})})]},a)}))})]}),o&&Object(W.jsx)(Pt,{handleClose:this.handleClose,title:"Error Log",children:o&&Object(W.jsx)(Gt,{lines:r.errors[c].text.trim().split("\n")})})]})}}]),n}(l.a.Component),tr=Object(u.b)((function(e){return{tuneInfo:e.dashboard.tuneInfo}}),$n)(Object(P.a)((function(e){return Object(f.a)({table:{marginTop:e.spacing(1)},cell:{padding:e.spacing(1),textAlign:"center","&:last-child":{paddingRight:e.spacing(1)}}})}))(er)),nr=n(416),rr=n(475),ar=$e,cr=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(L.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).timeout=0,e.state={sortedColumn:void 0,ascending:!0,metricParamColumn:"",metricColumns:[],paramColumns:[],errorTrial:"",open:!1},e.onColumnClick=function(t,n){var r=e.state.ascending;r=t!==e.state.sortedColumn||!r,e.setState({sortedColumn:t,ascending:r}),n&&e.setState({metricParamColumn:n})},e.humanize=function(e){return e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")},e.handleOpen=function(t){"number"===typeof t&&(t=t.toString()),e.setState({open:!0,errorTrial:t})},e.handleClose=function(){e.setState({open:!1})},e.sortedCell=function(t,n,r){var a=e.props,c=a.tuneInfo,o=a.classes,i=e.state,s=i.sortedColumn,l=i.ascending,u=i.metricParamColumn,d="asc";if(t!==s||l||(d="desc"),null!==c){var j=function(){return e.onColumnClick(t)};n&&(j=function(){return e.onColumnClick(t,n)}),r||(r=0);var b=!1,p=t+r.toString();return n?(p=n+r.toString(),b=n===u&&s===t):b=t===s,Object(W.jsxs)(jt.a,{className:o.cell,onClick:j,children:[Object(W.jsx)(dt.a,{active:b,direction:d}),n?e.humanize(n):e.humanize(t)]},p)}},e.sortedTrialRecords=function(){var t=e.props.tuneInfo,n=e.state,r=n.sortedColumn,a=n.ascending,c=n.metricParamColumn;if(null===t||0===Object.keys(t.trialRecords).length)return null;var o=Object.values(t.trialRecords);if(!r)return o;var i=function(e){return e[r]};return"metrics"!==r&&"params"!==r||(i=function(e){return e[r][c]}),r&&(a?o.sort((function(e,t){return i(e)>i(t)?1:-1})):a||o.sort((function(e,t){return i(e)<i(t)?1:-1}))),o},e.handleMetricChoiceChange=function(t){return function(n){var r=e.state.metricColumns;n.target.checked?(r.push(t),e.setState({metricColumns:r})):(r=r.filter((function(e){return e!==t})),e.setState({metricColumns:r}))}},e.metricChoices=function(t){var n=e.state.metricColumns;return Object(W.jsxs)(H.a,{children:[Object(W.jsx)(nr.a,{component:"legend",children:"Select Metrics "}),Object(W.jsx)(rr.a,{children:t.map((function(t){return Object(W.jsx)(Ft.a,{control:Object(W.jsx)(Rt.a,{checked:n.includes(t),onChange:e.handleMetricChoiceChange(t),value:t,color:"primary"}),label:t})}))})]})},e.handleParamChoiceChange=function(t){return function(n){var r=e.state.paramColumns;n.target.checked?(r.push(t),e.setState({paramColumns:r})):(r=r.filter((function(e){return e!==t})),e.setState({paramColumns:r}))}},e.paramChoices=function(t){var n=e.props.classes,r=e.state.paramColumns;return Object(W.jsxs)(H.a,{className:n.paramChecklist,children:[Object(W.jsx)(nr.a,{component:"legend",children:"Select Parameters "}),Object(W.jsx)(rr.a,{children:t.map((function(t){return Object(W.jsx)(Ft.a,{control:Object(W.jsx)(Rt.a,{checked:r.includes(t),onChange:e.handleParamChoiceChange(t),value:t,color:"primary"}),label:t})}))})]})},e}return Object(M.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.tuneInfo,a=this.state,c=a.metricColumns,o=a.paramColumns,i=a.open,s=a.errorTrial;if(null===r||0===Object.keys(r.trialRecords).length)return null;var l=Object.keys(r.trialRecords)[0],u=r.trialRecords[l].params,d=Object.keys(u).filter((function(e){return"args"!==e})),j=d,b=d.length>3;b&&(0===o.length&&this.setState({paramColumns:d.slice(0,3)}),j=o);var p=Object.keys(r.trialRecords[l].metrics),m=p,h=p.length>3;h&&(0===c.length&&this.setState({metricColumns:p.slice(0,3)}),m=c);var f=this.sortedTrialRecords();return Object(W.jsxs)("div",{className:n.root,children:[Object(W.jsxs)(ce.a,{container:!0,spacing:0,children:[(b||h)&&Object(W.jsxs)(ce.a,{item:!0,xs:2,className:n.checkboxRoot,children:[b&&this.paramChoices(d),h&&this.metricChoices(p)]}),Object(W.jsx)(ce.a,{item:!0,xs:b||h?10:12,className:n.table,children:Object(W.jsxs)(it.a,{stickyHeader:!0,children:[Object(W.jsx)(lt.a,{children:Object(W.jsxs)(ut.a,{children:[this.sortedCell("trialId"),this.sortedCell("jobId"),this.sortedCell("startTime"),j.map((function(t,n){return e.sortedCell("params",t,n)})),this.sortedCell("status"),m.map((function(t,n){return e.sortedCell("metrics",t,n)})),Object(W.jsx)(jt.a,{className:n.cell,children:"Error"},"error")]})}),Object(W.jsx)(st.a,{children:null!==f&&f.map((function(t,r){return Object(W.jsxs)(ut.a,{children:[Object(W.jsx)(jt.a,{className:n.cell,children:t.trialId}),Object(W.jsx)(jt.a,{className:n.cell,children:t.jobId}),Object(W.jsx)(jt.a,{className:n.cell,children:t.startTime}),j.map((function(e,r){return Object(W.jsx)(jt.a,{className:n.cell,children:"number"===typeof t.params[e]?at(Number(t.params[e])):t.params[e]},r)})),Object(W.jsx)(jt.a,{className:n.cell,children:t.status}),t.metrics&&m.map((function(e,r){return Object(W.jsx)(jt.a,{className:n.cell,children:"number"===typeof t.metrics[e]?at(Number(t.metrics[e])):t.metrics[e]},r)})),Object(W.jsx)(jt.a,{className:n.cell,children:"No Error"===t.error?"No Error":Object(W.jsx)(Zn.a,{component:"button",variant:"body2",onClick:function(){e.handleOpen(t.trialId)},children:"Show Error"})})]},r)}))})]})})]}),i&&Object(W.jsx)(Pt,{handleClose:this.handleClose,title:"Error Log",children:i&&Object(W.jsx)(Gt,{lines:r.trialRecords[s].error.trim().split("\n")})})]})}}]),n}(l.a.Component),or=Object(u.b)((function(e){return{tuneInfo:e.dashboard.tuneInfo}}),ar)(Object(P.a)((function(e){return Object(f.a)({root:{padding:e.spacing(2),"& > :not(:first-child)":{marginTop:e.spacing(2)}},table:{marginTop:e.spacing(1),height:"700px",overflowY:"auto"},cell:{padding:e.spacing(1),textAlign:"right","&:last-child":{paddingRight:e.spacing(1)}},checkboxRoot:{height:"500px",overflowY:"auto",overflowX:"auto"},paramChecklist:{marginBottom:e.spacing(2)}})}))(cr)),ir=$e,sr=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(L.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={tensorBoardEnabled:!1,loading:!1},e.handleSubmit=function(){e.setState({loading:!0}),A().then((function(){e.setState({loading:!1})}))},e.tensorBoard=function(){var t=e.props,n=t.classes,r=t.error,a=t.tuneInfo;return Object(W.jsxs)("div",{children:["TypeError: Failed to fetch"===r&&Object(W.jsx)(O.a,{className:n.warning,color:"textSecondary",children:'Warning: Tensorboard server closed. View Tensorboard by running "tensorboard --logdir" if not displaying below.'}),a&&!a.tensorboard.tensorboardCurrent&&Object(W.jsx)(O.a,{className:n.warning,color:"textSecondary",children:"The below Tensorboard reflects a previously entered log directory. Restart the Ray Dashboard to change the Tensorboard logdir."}),Object(W.jsx)("iframe",{src:"http://localhost:6006/",className:n.board,title:"TensorBoard"})]})},e}return Object(M.a)(n,[{key:"enableTensorBoard",value:function(){A(),this.setState({tensorBoardEnabled:!0})}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.tuneInfo,r=this.state.loading;if(null!==n){var a=n.tensorboard.tensorboardEnabled;return Object(W.jsxs)("div",{className:t.root,children:[!a&&Object(W.jsxs)("div",{children:[Object(W.jsx)(g.a,{variant:"outlined",onClick:this.handleSubmit,className:t.warning,children:"Enable TensorBoard"}),r&&Object(W.jsx)(Ge.a,{className:t.progress,size:25})]}),a&&this.tensorBoard()]})}}}]),n}(l.a.Component),lr=Object(u.b)((function(e){return{error:e.dashboard.error,tuneInfo:e.dashboard.tuneInfo}}),ir)(Object(P.a)((function(e){return Object(f.a)({root:{backgroundColor:e.palette.background.paper,padding:e.spacing(2),"& > :not(:first-child)":{marginTop:e.spacing(4)}},board:{width:"100%",height:"1000px",border:"none"},warning:{fontSize:"0.8125rem"},progress:{marginLeft:"10px",marginTop:"2px"}})}))(sr)),ur=$e,dr=function(e){Object(D.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(L.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).timeout=0,e.state={tabIndex:0,experiment:"",loading:!1},e.refreshTuneInfo=Object(b.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.props.tuneAvailability||!e.props.tuneAvailability.available){t.next=6;break}return t.next=4,F();case 4:n=t.sent,e.props.setTuneInfo(n);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.props.setError(t.t0.toString());case 11:return t.prev=11,e.timeout=window.setTimeout(e.refreshTuneInfo,1e3),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])}))),e.handleTabChange=function(t,n){e.setState({tabIndex:n})},e.handleExperimentChange=function(t){e.setState({experiment:t.target.value})},e.handleExperimentSubmit=Object(b.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,R(e.state.experiment);case 4:return window.clearTimeout(e.timeout),t.next=7,e.refreshTuneInfo();case 7:e.setState({loading:!1}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),e.props.setError(t.t0.toString()),e.setState({loading:!1});case 14:case"end":return t.stop()}}),t,null,[[1,10]])}))),e.experimentChoice=function(t){var n=e.props.classes,r=e.state.loading;return Object(W.jsxs)("div",{children:[t&&Object(W.jsxs)(O.a,{className:n.heading,color:"textPrimary",children:["You can use this tab to monitor Tune jobs, their statuses, hyperparameters, and more. For more information, read the documentation"," ",Object(W.jsx)("a",{href:"https://docs.ray.io/en/master/ray-dashboard.html#tune",children:"here"}),"."]}),Object(W.jsxs)("div",{children:[Object(W.jsx)(O.a,{className:n.prompt,color:"textSecondary",children:"Enter Tune Log Directory Here:"}),Object(W.jsx)(Qn.a,{className:n.input,id:"standard-basic",value:e.state.experiment,onChange:e.handleExperimentChange}),Object(W.jsx)(g.a,{className:n.submit,variant:"outlined",onClick:e.handleExperimentSubmit,children:"Submit"}),r&&Object(W.jsx)(Ge.a,{className:n.progress,size:25})]})]})},e}return Object(M.a)(n,[{key:"componentWillUnmount",value:function(){var e=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.clearTimeout(this.timeout);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.tuneInfo,r=e.tuneAvailability;if(r&&!r.trialsAvailable)return this.experimentChoice(!0);var a=this.state.tabIndex,c=[{label:"Table",component:or},{label:"TensorBoard",component:lr}];null!==n&&Object.keys(n.errors).length>0&&c.push({label:"Errors",component:tr});var o=c[a].component;return Object(W.jsxs)("div",{className:t.root,children:[this.experimentChoice(!1),Object(W.jsx)(x.a,{className:t.tabs,indicatorColor:"primary",onChange:this.handleTabChange,textColor:"primary",value:a,children:c.map((function(e){var t=e.label;return Object(W.jsx)(v.a,{label:t},t)}))}),Object(W.jsx)(o,{})]})}}]),n}(l.a.Component),jr=Object(u.b)((function(e){return{tuneInfo:e.dashboard.tuneInfo,tuneAvailability:e.dashboard.tuneAvailability}}),ur)(Object(P.a)((function(e){return Object(f.a)({root:{backgroundColor:e.palette.background.paper},tabs:{borderBottomColor:e.palette.divider,borderBottomStyle:"solid",borderBottomWidth:1},heading:{fontsize:"0.9em",marginTop:e.spacing(2)},warning:{fontSize:"1em"},warningIcon:{fontSize:"1.25em",verticalAlign:"text-bottom"},formControl:{margin:e.spacing(1),minWidth:120},submit:{marginLeft:e.spacing(2),fontSize:"0.8125em"},prompt:{fontSize:"1em",marginTop:e.spacing(1)},input:{width:"85%"},progress:{marginLeft:e.spacing(2)}})}))(dr)),br=$e.setNodeInfo,pr=$e.setTuneAvailability,mr=$e.setActorGroups,hr=$e.setError,fr=$e.setTab,Or=Object(h.a)((function(e){return Object(f.a)({root:{backgroundColor:e.palette.background.paper,padding:e.spacing(2),"& > :not(:first-child)":{marginTop:e.spacing(4)},position:"relative"},tabs:{borderBottomColor:e.palette.divider,borderBottomStyle:"solid",borderBottomWidth:1}})})),gr=function(e){return e.dashboard.tab},xr=function(e){return e.dashboard.tuneAvailability},vr=[{label:"Machine view",component:Vn},{label:"Logical view",component:Ue},{label:"Memory",component:It},{label:"Ray config",component:Xn},{label:"Tune",component:jr}],yr=function(){var e=Object(u.c)(),t=Object(u.d)(xr),n=Object(u.d)(gr),r=Or(),a=Object(j.f)(),o=Object(s.useCallback)(Object(b.a)(m.a.mark((function t(){var n,r,a,o,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([k("/nodes",{view:"details"}),k("/tune/availability",{}),k("logical/actor_groups",{})]);case 3:n=t.sent,r=Object(c.a)(n,3),a=r[0],o=r[1],i=r[2],e(br({nodeInfo:a})),e(pr(o)),e(mr(i)),e(hr(null)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),e(hr(t.t0.toString()));case 17:case"end":return t.stop()}}),t,null,[[0,14]])}))),[e]),i=Object(s.useRef)(null);Object(s.useEffect)((function(){null===i.current&&(o(),i.current=setInterval(o,1e3));return function(){clearInterval(i.current)}}),[o]);var l=vr.slice();null!==t&&t.available||l.splice(4);var d=l[n].component;return Object(W.jsxs)("div",{className:r.root,children:[Object(W.jsx)(O.a,{variant:"h5",children:"Ray Dashboard"}),Object(W.jsx)(g.a,{style:{position:"absolute",right:16,top:16},variant:"contained",size:"small",color:"primary",onClick:function(){return a.push("/node")},children:"Try Experimental Dashboard"}),Object(W.jsx)(x.a,{className:r.tabs,indicatorColor:"primary",onChange:function(t,n){return e(fr(n))},textColor:"primary",value:n,children:l.map((function(e){var t=e.label;return Object(W.jsx)(v.a,{label:t},t)}))}),Object(W.jsx)(d,{}),Object(W.jsx)(U,{})]})},kr=n(21),Sr=n(481),Nr=n(482),Cr=n(495),wr=n(483),Tr=n(491),Ir=n(488),Fr=n(59),Rr=n.n(Fr),Ar=n(68),Er=n.n(Ar),Lr=function(e){if(e)return Er.a.get("events?job_id=".concat(e))},Mr=n(103),Dr=n(108),zr=n(101),Pr=Object(h.a)((function(e){return{table:{marginTop:e.spacing(4),padding:e.spacing(2)},pageMeta:{padding:e.spacing(2),marginTop:e.spacing(2)},search:{margin:e.spacing(1),display:"inline-block",fontSize:12,lineHeight:"46px"},infokv:{margin:e.spacing(1)},li:{color:e.palette.text.secondary,fontSize:12},code:{wordBreak:"break-all",whiteSpace:"pre-line",margin:12,fontSize:14,color:e.palette.text.primary}}})),Wr=function(e){var t=Pr(),n=function(e){var t=e.job_id,n=Object(s.useContext)(da).nodeMap,r=Object(s.useState)(!0),o=Object(c.a)(r,2),i=o[0],l=o[1],u=Object(Mr.a)(),d=u.changeFilter,j=u.filterFunc,p=Object(s.useState)([]),h=Object(c.a)(p,2),f=h[0],O=h[1],g=Object(s.useState)([]),x=Object(c.a)(g,2),v=x[0],y=x[1],k=Object(s.useState)({pageNo:1,pageSize:10,total:0}),S=Object(c.a)(k,2),N=S[0],C=S[1],w=f.filter(j).length,T=N.pageSize;Object(s.useEffect)((function(){var e=function(){var e=Object(b.a)(m.a.mark((function e(){var n,r,a,c,o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=8;break}return e.next=4,Lr(t);case 4:null!==(a=e.sent)&&void 0!==a&&null!==(n=a.data)&&void 0!==n&&null!==(r=n.data)&&void 0!==r&&r.events&&O(a.data.data.events.sort((function(e,t){return Number(t.timestamp)-Number(e.timestamp)}))),e.next=12;break;case 8:return e.next=10,Er.a.get("events");case 10:null!==(i=e.sent)&&void 0!==i&&null!==(c=i.data)&&void 0!==c&&null!==(o=c.data)&&void 0!==o&&o.events&&(y(Object.keys(i.data.data.events).filter((function(e){return""!==e}))),O(Object.values(i.data.data.events).reduce((function(e,t){return e.concat(t)})).sort((function(e,t){return Number(t.timestamp)-Number(e.timestamp)}))));case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:return e.prev=16,l(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,14,16,19]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(s.useEffect)((function(){C((function(e){return Object(a.a)(Object(a.a)({},e),{},{total:Math.ceil(w/e.pageSize),pageNo:1})}))}),[w,T]);var I=[(N.pageNo-1)*N.pageSize,N.pageNo*N.pageSize];return{events:f.filter(j).slice(I[0],I[1]),changeFilter:function(){d.apply(void 0,arguments),C(Object(a.a)(Object(a.a)({},N),{},{pageNo:1}))},isJob:!!t,jobOptions:v,pagination:N,changePage:function(e,t){C(Object(a.a)(Object(a.a)({},N),{},Object(me.a)({},e,t)))},labelOptions:Array.from(new Set(f.map((function(e){return e.label})))),hostOptions:Array.from(new Set(f.map((function(e){return e.sourceHostname||e.hostName})))),sourceOptions:Array.from(new Set(f.map((function(e){return e.sourceType})))),severityOptions:Array.from(new Set(f.map((function(e){return e.severity})))),loading:i,reverseEvents:function(){O(Object(kr.a)(f.reverse()))},nodeMap:n}}(e),r=n.events,o=n.changeFilter,i=n.isJob,l=n.jobOptions,u=n.pagination,j=n.changePage,p=n.labelOptions,h=n.hostOptions,f=n.sourceOptions,O=n.severityOptions,x=n.loading,v=n.reverseEvents,y=n.nodeMap;return x?Object(W.jsx)(Sr.a,{}):Object(W.jsxs)("div",{style:{position:"relative"},children:[Object(W.jsxs)("div",{children:[Object(W.jsx)(Tr.a,{className:t.search,style:{width:200},options:p,onInputChange:function(e,t){o("label",t.trim())},renderInput:function(e){return Object(W.jsx)(Qn.a,Object(a.a)(Object(a.a)({},e),{},{label:"Label"}))}}),Object(W.jsx)(Tr.a,{className:t.search,style:{width:200},options:h,onInputChange:function(e,t){o("sourceHostname",t.trim())},renderInput:function(e){return Object(W.jsx)(Qn.a,Object(a.a)(Object(a.a)({},e),{},{label:"Host"}))}}),Object(W.jsx)(Tr.a,{className:t.search,style:{width:100},options:f,onInputChange:function(e,t){o("sourceType",t.trim())},renderInput:function(e){return Object(W.jsx)(Qn.a,Object(a.a)(Object(a.a)({},e),{},{label:"Source"}))}}),Object(W.jsx)(Tr.a,{className:t.search,style:{width:140},options:O,onInputChange:function(e,t){o("severity",t.trim())},renderInput:function(e){return Object(W.jsx)(Qn.a,Object(a.a)(Object(a.a)({},e),{},{label:"Severity"}))}}),!i&&Object(W.jsx)(Tr.a,{className:t.search,style:{width:100},options:l,onInputChange:function(e,t){o("jobId",t.trim())},renderInput:function(e){return Object(W.jsx)(Qn.a,Object(a.a)(Object(a.a)({},e),{},{label:"Job"}))}}),Object(W.jsx)(Qn.a,{className:t.search,label:"Msg",InputProps:{onChange:function(e){var t=e.target.value;o("message",t.trim())},endAdornment:Object(W.jsx)(Nr.a,{position:"end",children:Object(W.jsx)(wr.a,{})})}}),Object(W.jsx)(Qn.a,{className:t.search,label:"Page Size",InputProps:{onChange:function(e){var t=e.target.value;j("pageSize",Math.min(Number(t),500)||10)},value:u.pageSize}}),Object(W.jsx)(g.a,{className:t.search,onClick:function(){return v()},children:"Reverse"})]}),Object(W.jsx)("div",{children:Object(W.jsx)(Ir.a,{count:u.total,page:u.pageNo,onChange:function(e,t){j("pageNo",t)}})}),Object(W.jsx)("div",{className:t.pageMeta,children:r.length?r.map((function(e){var n=e.label,r=e.message,a=e.timestamp,c=e.timeStamp,o=e.sourceType,i=e.sourceHostname,s=e.hostName,l=e.sourcePid,u=e.pid,j=e.eventId,b=e.jobId,p=e.jobName,m=e.nodeId,h=e.severity,f=e.customFields,O=c||Rr()(Math.floor(1e3*a)).format("YYYY-MM-DD HH:mm:ss"),g=i||s,x=u||l;return Object(W.jsxs)("article",{className:t.li,children:[Object(W.jsxs)(ce.a,{container:!0,spacing:4,children:[Object(W.jsx)(ce.a,{item:!0,children:Object(W.jsx)(zr.a,{status:n,type:h})}),Object(W.jsx)(ce.a,{item:!0,children:O}),f&&Object(W.jsx)(ce.a,{item:!0,children:Object(W.jsx)(je.a,{interactive:!0,title:Object(W.jsx)("pre",{style:{whiteSpace:"pre-wrap"},children:JSON.stringify(f,null,2)}),children:Object(W.jsx)(Cr.a,{size:"small",label:"CustomFields"})})})]}),Object(W.jsxs)(ce.a,{container:!0,children:[Object(W.jsxs)(ce.a,{item:!0,className:t.infokv,children:["severity: ",h]}),Object(W.jsxs)(ce.a,{item:!0,className:t.infokv,children:["source: ",o]}),Object(W.jsxs)(ce.a,{item:!0,className:t.infokv,children:["hostname:"," ",y[g]?Object(W.jsx)(d.b,{to:"/node/".concat(y[g]),children:g}):g]}),Object(W.jsxs)(ce.a,{item:!0,className:t.infokv,children:["pid: ",x]}),b&&Object(W.jsxs)(ce.a,{item:!0,className:t.infokv,children:["jobId: ",Object(W.jsx)(d.b,{to:"/job/".concat(b),children:b})]}),p&&Object(W.jsxs)(ce.a,{item:!0,className:t.infokv,children:["jobId: ",p]}),j&&Object(W.jsxs)(ce.a,{item:!0,className:t.infokv,children:["eventId: ",j]}),m&&Object(W.jsxs)(ce.a,{item:!0,className:t.infokv,children:["nodeId: ",m]})]}),Object(W.jsx)(Dr.a,{content:r,language:"prolog"})]},j)})):"No Events Yet."}),Object(W.jsx)("div",{children:Object(W.jsx)(Ir.a,{count:u.total,page:u.pageNo,onChange:function(e,t){j("pageNo",t)}})})]})},Br=n(102),Ur=Object(h.a)((function(e){return{root:{padding:e.spacing(2)}}})),Gr=function(){var e=Ur();return Object(W.jsx)("div",{className:e.root,children:Object(W.jsx)(Br.a,{title:"Event",children:Object(W.jsx)(Wr,{})})})},Hr=n(124),_r=function(){return Object(W.jsx)("div",{style:{height:"100vh",width:"100vw"},children:Object(W.jsxs)("div",{style:{margin:"250px auto 0 auto",textAlign:"center",fontSize:40,fontWeight:500},children:[Object(W.jsx)("img",{src:Hr.a,alt:"Loading",width:100}),Object(W.jsx)("br",{}),"Loading..."]})})},Vr=n(106),Jr=Object(Qe.a)({reducer:{dashboard:et},devTools:!1}),qr=n(91),Yr=n(478),Kr=n(88),Xr=n(480),Qr=n(141),Zr={typography:{fontSize:12,fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},props:{MuiPaper:{elevation:0}}},$r=Object(Qr.a)(Object(a.a)(Object(a.a)({},Zr),{},{palette:{primary:qr.a,secondary:Yr.a,text:{primary:Kr.a[900],secondary:Kr.a[800],disabled:Kr.a[400],hint:Kr.a[300]},background:{paper:"#fff",default:Xr.a[50]}}})),ea=Object(Qr.a)(Object(a.a)(Object(a.a)({},Zr),{},{palette:{primary:qr.a,secondary:Yr.a,text:{primary:Xr.a[50],secondary:Xr.a[100],disabled:Xr.a[200],hint:Xr.a[300]},background:{paper:Kr.a[800],default:Kr.a[900]}}})),ta=l.a.lazy((function(){return n.e(5).then(n.bind(null,516))})),na=l.a.lazy((function(){return n.e(10).then(n.bind(null,517))})),ra=l.a.lazy((function(){return n.e(8).then(n.bind(null,518))})),aa=l.a.lazy((function(){return n.e(7).then(n.bind(null,519))})),ca=l.a.lazy((function(){return n.e(3).then(n.bind(null,520))})),oa=l.a.lazy((function(){return n.e(11).then(n.bind(null,514))})),ia=l.a.lazy((function(){return n.e(9).then(n.bind(null,521))})),sa=l.a.lazy((function(){return n.e(6).then(n.bind(null,515))})),la=l.a.lazy((function(){return n.e(4).then(n.bind(null,522))})),ua="ray-dashboard-theme",da=l.a.createContext({nodeMap:{},ipLogMap:{},namespaceMap:{}}),ja=function(){return function(e){var t=window.localStorage.getItem(e);try{return JSON.parse(t||"")}catch(n){return t}}(ua)||"light"},ba=function(e){return t=ua,n=e,window.localStorage.setItem(t,JSON.stringify(n));var t,n};t.b=function(){var e,t=Object(s.useState)(ja()),n=Object(c.a)(t,2),r=n[0],l=n[1],b=Object(s.useState)({nodeMap:{},ipLogMap:{},namespaceMap:{}}),p=Object(c.a)(b,2),m=p[0],h=p[1],f=function(e){ba(e),l(e)};return Object(s.useEffect)((function(){Object(Vr.b)().then((function(e){var t,n;if(null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.summary){var r={},a={};e.data.data.summary.forEach((function(e){var t=e.hostname,n=e.raylet,c=e.ip,o=e.logUrl;r[t]=n.nodeId,a[c]=o})),h({nodeMap:r,ipLogMap:a,namespaceMap:{}})}}))}),[]),Object(W.jsx)(i.a,{theme:(e=r,"dark"===e?ea:$r),children:Object(W.jsx)(s.Suspense,{fallback:_r,children:Object(W.jsx)(da.Provider,{value:m,children:Object(W.jsxs)(u.a,{store:Jr,children:[Object(W.jsx)(o.a,{}),Object(W.jsx)(d.a,{children:Object(W.jsxs)(j.c,{children:[Object(W.jsx)(j.a,{component:yr,exact:!0,path:"/"}),Object(W.jsx)(j.a,{render:function(e){return Object(W.jsxs)(oa,Object(a.a)(Object(a.a)({},e),{},{setTheme:f,theme:r,children:[Object(W.jsx)(j.a,{component:ra,exact:!0,path:"/summary"}),Object(W.jsx)(j.a,{component:aa,exact:!0,path:"/job"}),Object(W.jsx)(j.a,{component:sa,exact:!0,path:"/node"}),Object(W.jsx)(j.a,{component:ta,exact:!0,path:"/actors"}),Object(W.jsx)(j.a,{component:Gr,exact:!0,path:"/events"}),Object(W.jsx)(j.a,{render:function(e){return Object(W.jsx)(ia,Object(a.a)(Object(a.a)({},e),{},{theme:r}))},exact:!0,path:"/log/:host?/:path?"}),Object(W.jsx)(j.a,{component:la,path:"/node/:id"}),Object(W.jsx)(j.a,{component:ca,path:"/job/:id"}),Object(W.jsx)(j.a,{component:na,path:"/cmd/:cmd/:ip/:pid"}),Object(W.jsx)(j.a,{component:_r,exact:!0,path:"/loading"})]}))}})]})})]})})})})}}},[[152,1,2]]]);
//# sourceMappingURL=main.1a200dfd.chunk.js.map